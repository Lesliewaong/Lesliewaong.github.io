<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>React-Router v6 | Leslie Waong</title><meta name="keywords" content="React,React-Router"><meta name="author" content="Leslie Waong"><meta name="copyright" content="Leslie Waong"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="React-Router v6官方博客&lt;Routes&gt;v6中最令人兴奋的变化之一是强大的新&lt;Routes&gt;元素。 这是v5的&lt;Switch&gt;元素的一个非常重要的升级，包含了一些重要的新特性，包括相对路由和链接、自动路由排名以及嵌套路由和布局。 &lt;Route path&gt; and &lt;Link to&gt;与v5中的&lt;Switch&gt; AP"><meta property="og:type" content="article"><meta property="og:title" content="React-Router v6"><meta property="og:url" content="https://lesliewaong.top/posts/e4b955ad.html"><meta property="og:site_name" content="Leslie Waong"><meta property="og:description" content="React-Router v6官方博客&lt;Routes&gt;v6中最令人兴奋的变化之一是强大的新&lt;Routes&gt;元素。 这是v5的&lt;Switch&gt;元素的一个非常重要的升级，包含了一些重要的新特性，包括相对路由和链接、自动路由排名以及嵌套路由和布局。 &lt;Route path&gt; and &lt;Link to&gt;与v5中的&lt;Switch&gt; AP"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/14.webp"><meta property="article:published_time" content="2021-12-01T06:19:57.000Z"><meta property="article:modified_time" content="2022-03-17T09:44:10.484Z"><meta property="article:author" content="Leslie Waong"><meta property="article:tag" content="React"><meta property="article:tag" content="React-Router"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/14.webp"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/avatar.jpg"><link rel="canonical" href="https://lesliewaong.top/posts/e4b955ad"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"一年之内的产物",messageNext:"技术可能存在过期"},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:50,languages:{author:"作者: Leslie Waong",link:"链接: ",source:"来源: Leslie Waong",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#121212",position:"bottom-left"},source:{jQuery:"https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js",justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js",css:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isanchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"React-Router v6",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2022-03-17 17:44:10"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));const n=saveToLocal.get("global-font-size");void 0!==n&&document.documentElement.style.setProperty("--global-font-size",n+"px");const a=()=>{GLOBAL_CONFIG_SITE.isHome&&/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")};a(),document.addEventListener("pjax:complete",a)})(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Leslie Waong" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/avatar.jpg" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">50</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">108</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-archive"></i><span> 归档</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-book"></i><span> 说说</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时轴</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/List/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/List/gallery/"><i class="fa-fw fa fa-image"></i><span> 相册</span></a></li><li><a class="site-page child" href="/List/movies/"><i class="fa-fw fa fa-film"></i><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/tools/"><i class="fa-fw fa fa-suitcase"></i><span> 百宝箱</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 项目</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/item/Naruto/"><i class="fa-fw fa fa-star"></i><span> 火影</span></a></li><li><a class="site-page child" href="/react-admin-client"><i class="fa-fw fa fa-star"></i><span> One Piece</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/bangumis/"><i class="fa-fw fa fa-desktop"></i><span> BiliBili</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/14.webp)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Leslie Waong</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-archive"></i><span> 归档</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-book"></i><span> 说说</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时轴</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/List/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/List/gallery/"><i class="fa-fw fa fa-image"></i><span> 相册</span></a></li><li><a class="site-page child" href="/List/movies/"><i class="fa-fw fa fa-film"></i><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/tools/"><i class="fa-fw fa fa-suitcase"></i><span> 百宝箱</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 项目</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/item/Naruto/"><i class="fa-fw fa fa-star"></i><span> 火影</span></a></li><li><a class="site-page child" href="/react-admin-client"><i class="fa-fw fa fa-star"></i><span> One Piece</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/bangumis/"><i class="fa-fw fa fa-desktop"></i><span> BiliBili</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">React-Router v6</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-12-01T06:19:57.000Z" title="发表于 2021-12-01 14:19:57">2021-12-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-03-17T09:44:10.484Z" title="更新于 2022-03-17 17:44:10">2022-03-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>34分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="React-Router v6"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="React-Router-v6"><a href="#React-Router-v6" class="headerlink" title="React-Router v6"></a>React-Router v6</h1><h2 id="官方博客"><a href="#官方博客" class="headerlink" title="官方博客"></a><a target="_blank" rel="noopener" href="https://reacttraining.com/blog/react-router-v6-pre/">官方博客</a></h2><h3 id="lt-Routes-gt"><a href="#lt-Routes-gt" class="headerlink" title="&lt;Routes&gt;"></a><code>&lt;Routes&gt;</code></h3><p>v6中最令人兴奋的变化之一是强大的新<code>&lt;Routes&gt;</code>元素。</p><p>这是v5的<code>&lt;Switch&gt;</code>元素的一个非常重要的升级，包含了一些重要的新特性，包括相对路由和链接、自动路由排名以及嵌套路由和布局。</p><h3 id="lt-Route-path-gt-and-lt-Link-to-gt"><a href="#lt-Route-path-gt-and-lt-Link-to-gt" class="headerlink" title="&lt;Route path&gt; and &lt;Link to&gt;"></a><code>&lt;Route path&gt;</code> and <code>&lt;Link to&gt;</code></h3><p>与v5中的<code>&lt;Switch&gt;</code> API不同，v6的<code>&lt;Routes&gt;</code>元素下的所有<code>&lt;Route path</code>&gt;和<code>&lt;Link to&gt;</code>值都是自动相对于渲染它们的父路由的。</p><p>这让你更容易把你的React Router看成是许多小应用，只是在不同的“挂载”点拼接在一起。直</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; BrowserRouter, Routes, Route, Link &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Home</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;users/*&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Users</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Users</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">/* All &lt;Route path&gt; and &lt;Link to&gt; values in this</span></span><br><span class="line"><span class="comment">     component will automatically be &quot;mounted&quot; at the</span></span><br><span class="line"><span class="comment">     /users URL prefix since the &lt;Users&gt; element is only</span></span><br><span class="line"><span class="comment">     ever rendered when the URL matches /users/*</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;me&quot;</span>&gt;</span>My Profile<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">UsersIndex</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;:id&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">UserProfile</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;me&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">OwnUserProfile</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果您第一次学习React Router，则此示例可能看起来没有大不大。这似乎非常直观！</p><p>但是，如果你习惯于在v5中的工作方式，你会注意到我们修复了一些事情：</p><ul><li>您不需要在<code>&lt;Route path=&quot;/&quot;&gt;</code>上使用<code>exact</code>的属性。这是因为默认情况下所有<code>&lt;Route&gt;</code>路径都匹配。如果您想要匹配更多URL，因为您有子路由（请参阅上面的<code>Users</code>组件中定义的<code>&lt;Routes&gt;</code>），请使用尾随<code>*</code>在<code>&lt;Route path=&quot;users/*&quot;&gt;</code>中。</li><li>所有路由和链接都会自动构建在呈现它们的<code>path</code>上，因此例如， <code>&lt;Link to=&quot;me&quot;&gt;</code>内部呈现的<code>&lt;Route path=&quot;users/*&quot;&gt;</code>将要链接到<code>/users/me</code>。</li></ul><p>如果您在React Router v5中进行了相对路由和链接，则会注意到您不需要手动插入<code>match.path</code>和<code>match.url</code>。</p><h3 id="嵌套路由和布局"><a href="#嵌套路由和布局" class="headerlink" title="嵌套路由和布局"></a>嵌套路由和布局</h3><p>在一个大型应用程序中，能够将你的路由定义分散到多个<code>&lt;Routes&gt;</code>元素中是很好的，这样你就可以更容易地进行代码分割。</p><p>但在较小的应用程序中，或者在嵌套组件密切相关的情况下，你可能希望在一个地方看到所有的路由。这对提高代码的可读性有很大帮助。</p><p>让我们继续前面的代码示例中,除了这一次我们会把所有的路线到一个<code>&lt;Routes&gt;</code>声明中定义的路线,通过我们的<code>Users</code>组件并把他们提升到<code>App</code>。我们还将使用一个<code>&lt;Outlet&gt;</code>在<code>Users</code>使用的路由会呈现子路由。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter,</span><br><span class="line">  Routes,</span><br><span class="line">  Route,</span><br><span class="line">  Link,</span><br><span class="line">  Outlet</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Home</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;users&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Users</span> /&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">UsersIndex</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;:id&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">UserProfile</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;me&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">OwnUserProfile</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Users</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;me&quot;</span>&gt;</span>My Profile<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Outlet</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果将这个示例与前一个示例进行比较，您将注意到一些事情</p><ul><li>我们正在使用<code>&lt;Route children&gt;</code>指定嵌套路由！URL路径与路由元素一起嵌套，所以<code>/users/me</code>渲染 <code>&lt;Users&gt;&lt;OwnUserProfile /&gt;&lt;/Users&gt;</code>。</li><li>我们使用<code>&lt;Outlet&gt;</code>元素作为占位符。在本例中，<code>&lt;Outlet&gt;</code>是用户组件呈现其子路由的方式。因此，<code>&lt;Outlet&gt;</code>将根据当前位置呈现<code>&lt;UserProfile&gt;</code>或<code>&lt;OwnUserProfile&gt;</code>元素。</li></ul><p>您可能已经注意到的另一件小事是 <code>&lt;Route path=&quot;users&quot;&gt;</code> 不再需要路径上的尾随 <code>/*</code>。 当所有路由都定义在一起时，您就不需要它了，因为路由器可以一次看到您的所有路由。</p><p>注意：像这样嵌套路由的能力是我们最喜欢的 React Router v3 特性之一，但是当我们更关注大型应用程序的需求时，我们在 v4 中失去了它，比如代码拆分。 第 6 版汇集了两全其美的优点。 将所有 <code>&lt;Routes&gt;</code> 放在一个位置，或者根据需要将它们散布在您的应用程序中。 由你决定!</p><h3 id="基于对象的路由"><a href="#基于对象的路由" class="headerlink" title="基于对象的路由"></a>基于对象的路由</h3><p>到目前为止，我们已经讨论了新的 <code>&lt;Routes&gt;</code>、<code>&lt;Route&gt;</code> 和 <code>&lt;Outlet&gt;</code> API，它们使用 React 元素来声明您的路由。 我将这个 API 称为“JSX API”，用于使用 React Router 进行路由。</p><p>但是React Router v6附带了另一个用于路由的API，它使用普通的JavaScript对象来声明你的路由。事实上，如果您查看<code>&lt;Routes&gt;</code>的源代码，就会发现它实际上只是一个围绕在路由器匹配算法<code>useRoutes</code>核心的钩子的小包装。</p><p><code>useRoutes</code>钩子是一个一流的路由API，它允许你使用JavaScript对象而不是React元素来声明和组合路由。继续上面的例子，让我们看看useRoutes是什么样子。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter,</span><br><span class="line">  Link,</span><br><span class="line">  Outlet,</span><br><span class="line">  useRoutes</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//我们从 App 中删除了 &lt;BrowserRouter&gt; 元素，</span></span><br><span class="line">  <span class="comment">//因为 useRoutes 钩子需要位于 &lt;BrowserRouter&gt; 元素的上下文中。 </span></span><br><span class="line">  <span class="comment">//这是在不同环境中呈现的 React Router 应用程序的常见模式。 </span></span><br><span class="line">  <span class="comment">//要呈现 &lt;App&gt;，您需要将它包装在您自己的 &lt;BrowserRouter&gt; 元素中。</span></span><br><span class="line">  <span class="keyword">let</span> element = useRoutes([</span><br><span class="line">    <span class="comment">// 路由对象与 &lt;Route&gt; 元素具有相同的属性。 `children` 只是一个子路由数组。</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">Home</span> /&gt;</span></span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;users&#x27;</span>,</span><br><span class="line">      <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">Users</span> /&gt;</span></span>,</span><br><span class="line">      children: [</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">UsersIndex</span> /&gt;</span></span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;:id&#x27;</span>, <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">UserProfile</span> /&gt;</span></span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;me&#x27;</span>, <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">OwnUserProfile</span> /&gt;</span></span> &#125;,</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Users</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;me&quot;</span>&gt;</span>My Profile<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Outlet</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>useRoutes钩子接受一个(可能嵌套的)JavaScript对象数组，该数组表示应用程序中的可用路由。每个路由都有一个路径、元素和(可选的)子路由，而子路由只是另一个路由数组。如果您在v5中使用react-router-config包，那么基于对象的路由配置可能看起来很熟悉。在v6中，这种配置格式已经被提升为核心的一级API, react-router-config包将被弃用。</p><h3 id="Suspense-ready-Navigation"><a href="#Suspense-ready-Navigation" class="headerlink" title="Suspense-ready Navigation"></a>Suspense-ready Navigation</h3><p>版本 6 是我们为 React 的未来准备好路由器的绝佳机会：suspense。 v6 没有让您直接访问history实例（使用它会在suspense-enabled的应用程序中引入微妙的错误），而是为您提供了一个 useNavigate 钩子。 这在您需要命令式导航的任何时候都很有用，例如 在用户提交表单或点击按钮之后。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useNavigate &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> navigate = useNavigate();</span><br><span class="line">  <span class="keyword">let</span> [error, setError] = React.useState(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">handleSubmit</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">await</span> submitForm(event.target);</span><br><span class="line">    <span class="keyword">if</span> (result.error) &#123;</span><br><span class="line">      setError(result.error);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      navigate(<span class="string">&#x27;success&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;handleSubmit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      // ...</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果你需要replace而不是push，使用navigate(‘success’， {replace: true})。如果你需要state，使用导航(‘success’， {state})。</p><p>在一个suspense-enabled的应用程序中，navigate功能会意识到你的应用程序何时处于暂停状态。当它是时，任何push导航将自动转换为replace操作。当构建带有多个链接的单页面应用程序时，这可能很有用，用户单击一个因为需要加载数据而挂起的链接，然后快速单击另一个链接并转到一个新页面。在这种情况下，路由器会自动从浏览器历史记录中省略第一个导航，因为那个页面实际上从未加载过。</p><h2 id="从-v5-升级"><a href="#从-v5-升级" class="headerlink" title="从 v5 升级"></a><a target="_blank" rel="noopener" href="https://github.com/remix-run/react-router/blob/main/docs/upgrading/v5.md">从 v5 升级</a></h2><h3 id="向后兼容包"><a href="#向后兼容包" class="headerlink" title="向后兼容包"></a>向后兼容包</h3><p>我们正在积极致力于在 v6 实现之上实现 v5 API 的向后兼容层。这将使升级尽可能顺利。您只需对应用程序代码进行最少的更改即可升级到 v6。然后，您可以逐步将代码更新为 v6 API。</p><p>我们建议等待向后兼容包发布，然后再升级具有多个路由的应用程序。</p><p>在此之前，我们希望本指南能帮助您一次性完成升级！</p><p>React Router v6 大量使用<a target="_blank" rel="noopener" href="https://reactjs.org/docs/hooks-intro.html">React hooks</a>，因此在尝试升级到 React Router v6 之前，您需要使用 React 16.8 或更高版本。好消息是 React Router v5 与 React &gt;= 15 兼容，因此如果您使用的是 v5（或 v4），您应该能够在不接触任何路由器代码的情况下升级 React。</p><h3 id="升级到-React-Router-v6"><a href="#升级到-React-Router-v6" class="headerlink" title="升级到 React Router v6"></a>升级到 React Router v6</h3><p><strong>注意：</strong>这是迁移过程中最大的一步，可能会花费最多的时间和精力。</p><p>对于这一步，您需要安装 React Router v6。如果您通过 npm 管理依赖项：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npm install react-router-dom</span><br><span class="line"> <span class="comment">#或者，对于 React Native 应用程序</span></span><br><span class="line">$ npm install react-router-native</span><br></pre></td></tr></table></figure><p>您还需要<code>history</code>从 <code>package.json</code> 中删除依赖项。该<code>history</code>库是 v6 的直接依赖项（不是对等的dep），因此您永远不会直接导入或使用它。相反，您将使用<code>useNavigate()</code>钩子进行所有导航（见下文）。</p><h4 id="将所有-lt-Switch-gt-元素升级为-lt-Routes-gt"><a href="#将所有-lt-Switch-gt-元素升级为-lt-Routes-gt" class="headerlink" title="将所有 &lt;Switch&gt; 元素升级为 &lt;Routes&gt;"></a>将所有 <code>&lt;Switch&gt;</code> 元素升级为 <code>&lt;Routes&gt;</code></h4><p>React Router v6 引入了一个类似于 Switch 的 Routes 组件，但功能更强大。 Routes 相对于 Switch 的主要优点是：</p><ul><li><code>&lt;Routes&gt;</code> 中的所有 <code>&lt;Route&gt;</code> 和 <code>&lt;Link&gt;</code> 都是相对的。 这导致 <code>&lt;Route path&gt;</code> 和 <code>&lt;Link to&gt;</code> 中的代码更精简、更可预测。</li><li>根据最佳匹配选择路线，而不是按顺序遍历。 这避免了由于无法访问的路由而导致的错误，因为它们稍后在您的 <code>&lt;Switch&gt;</code> 中定义。</li><li>路由可以嵌套在一个地方，而不是分散在不同的组件中。 在中小型应用程序中，这让您可以轻松地同时查看所有路线。 在大型应用程序中，您仍然可以在通过 <code>React.lazy</code> 动态加载的包中嵌套路由</li></ul><p>为了使用 v6，您需要将所有 <code>&lt;Switch&gt;</code> 元素转换为 <code>&lt;Routes&gt;</code>。</p><h3 id="相对路由和链接"><a href="#相对路由和链接" class="headerlink" title="相对路由和链接"></a>相对路由和链接</h3><p>在 v5 中，您必须非常明确地说明如何嵌套路由和链接。 在这两种情况下，如果你想要嵌套路由和链接，你必须从父路由的 <code>match.url</code> 和 <code>match.path</code> 属性构建 <code>&lt;Route path&gt;</code> 和 <code>&lt;Link to&gt;</code> 道具。 此外，如果您想嵌套路由，则必须将它们放在子路由的组件中。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is a React Router v5 app</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter,</span><br><span class="line">  Switch,</span><br><span class="line">  Route,</span><br><span class="line">  Link,</span><br><span class="line">  useRouteMatch</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">Home</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/users&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">Users</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Users</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 在 v5 中，嵌套路由由子组件呈现，因此您的应用程序中到处都有 &lt;Switch&gt; 元素用于嵌套 UI。</span></span><br><span class="line">  <span class="comment">// 您可以使用 match.url 和 match.path 构建嵌套路由和链接。</span></span><br><span class="line">  <span class="keyword">let</span> match = useRouteMatch();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">match.url</span>&#125;/<span class="attr">me</span>`&#125;&gt;</span>My Profile<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">match.path</span>&#125;/<span class="attr">me</span>`&#125;&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">OwnUserProfile</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">match.path</span>&#125;/<span class="attr">:id</span>`&#125;&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">UserProfile</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>v6:</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is a React Router v6 app</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter,</span><br><span class="line">  Routes,</span><br><span class="line">  Route,</span><br><span class="line">  Link</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Home</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;users/*&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Users</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Users</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;me&quot;</span>&gt;</span>My Profile<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;:id&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">UserProfile</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;me&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">OwnUserProfile</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在此示例中，关于 v6 的一些重要事项需要注意：</p><ul><li><code>&lt;Route path&gt;</code> 和 <code>&lt;Link to&gt;</code> 是相对的。 这意味着它们会自动构建在父路由的路径和 URL 上，因此您不必手动插入 <code>match.url</code> 或 <code>match.path</code>。</li><li><code>&lt;Route exact&gt;</code> 不见了。 相反，具有后代路由（在其他组件中定义）的路由在其路径中使用尾随 <code>*</code> 来表示它们深度匹配。</li><li>您可以按您希望的任何顺序放置路由，路由器将自动检测当前 URL 的最佳路由。 这可以防止由于在 <code>&lt;Switch&gt;</code> 中以错误的顺序手动放置路由而导致的错误。</li></ul><p>您可能还注意到 v5 应用程序中的所有 <code>&lt;Route children&gt;</code> 都更改为 v6 中的 <code>&lt;Route element&gt;</code>。 假设您按照升级到 v5.1 的步骤进行操作，这应该就像将您的路由元素从子位置移动到命名元素道具一样简单。</p><h3 id="lt-Route-element-gt-的优点"><a href="#lt-Route-element-gt-的优点" class="headerlink" title="&lt;Route element&gt; 的优点"></a><code>&lt;Route element&gt;</code> 的优点</h3><p>在关于升级到 v5.1 的部分中，我们承诺我们将讨论使用常规元素而不是组件（或元素类型）进行渲染的优势。</p><p>首先，我们看到 React 本身在 <code>&lt;Suspense fallback=&#123;&lt;Spinner /&gt;&#125;&gt;</code> API 中处于领先地位。回退道具采用 React 元素，而不是组件。这让您可以轻松地将您想要的任何道具从渲染它的组件传递给您的 <code>&lt;Spinner&gt;</code>。</p><p>使用元素而不是组件意味着我们不必提供 <code>passProps</code> 样式的 API，因此您可以获得元素所需的道具。例如，在基于组件的 API 中，没有好的方法将 props 传递给 <code>&lt;Route path=&quot;:userId&quot; component=&#123;Profile&#125; /&gt;</code> 匹配时呈现的 <code>&lt;Profile&gt;</code> 元素。大多数采用这种方法的 React 库最终要么使用像 <code>&lt;Route component=&#123;Profile&#125; passProps=&#123;&#123; animate: true &#125;&#125; /&gt;</code> 这样的 API，要么使用渲染道具或高阶组件。</p><p>另外，如果您没有注意到，在 v4 和 v5 中，Route 的渲染 API 变得相当大。它是这样的：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Ah, this is nice and simple!</span></span><br><span class="line">&lt;Route path=<span class="string">&quot;:userId&quot;</span> component=&#123;Profile&#125; /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// But wait, how do I pass custom props to the &lt;Profile&gt; element??</span></span><br><span class="line"><span class="comment">// Hmm, maybe we can use a render prop in those situations?</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">  <span class="attr">path</span>=<span class="string">&quot;:userId&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">  <span class="attr">render</span>=<span class="string">&#123;routeProps</span> =&gt;</span> (</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Profile</span> <span class="attr">routeProps</span>=<span class="string">&#123;routeProps&#125;</span> <span class="attr">animate</span>=<span class="string">&#123;true&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  )&#125;</span></span><br><span class="line"><span class="xml">/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Ok, now we have two ways to render something with a route. :/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// But wait, what if we want to render something when a route</span></span><br><span class="line"><span class="comment">// *doesn&#x27;t* match the URL, like a Not Found page? Maybe we</span></span><br><span class="line"><span class="comment">// can use another render prop with slightly different semantics?</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">  <span class="attr">path</span>=<span class="string">&quot;:userId&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">  <span class="attr">children</span>=<span class="string">&#123;(&#123;</span> <span class="attr">match</span> &#125;) =&gt;</span> (</span></span><br><span class="line"><span class="xml">    match ? (</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Profile</span> <span class="attr">match</span>=<span class="string">&#123;match&#125;</span> <span class="attr">animate</span>=<span class="string">&#123;true&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    ) : (</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">NotFound</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    )</span></span><br><span class="line"><span class="xml">  )&#125;</span></span><br><span class="line"><span class="xml">/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// What if I want to get access to the route match, or I need</span></span><br><span class="line"><span class="comment">// to redirect deeper in the tree?</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DeepComponent</span>(<span class="params">routeStuff</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// got routeStuff, phew!</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withRouter(DeepComponent);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Well hey, now at least we&#x27;ve covered all our use cases!</span></span><br><span class="line"><span class="comment">// ... *facepalm*</span></span><br></pre></td></tr></table></figure><p>这个 API 蔓延的至少部分原因是 React 没有提供任何方式让我们从 <code>&lt;Route&gt;</code> 获取信息到你的路由元素，所以我们必须发明聪明的方法来获取路由数据和你自己的 自定义道具props到您的元素：组件、渲染道具、passProps 高阶组件……直到钩子出现！</p><p>现在，上面的对话是这样的：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Ah, nice and simple API. And it&#x27;s just like the &lt;Suspense&gt; API!</span></span><br><span class="line"><span class="comment">// Nothing more to learn here.</span></span><br><span class="line">&lt;Route path=<span class="string">&quot;:userId&quot;</span> element=&#123;<span class="xml"><span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// But wait, how do I pass custom props to the &lt;Profile&gt;</span></span><br><span class="line"><span class="comment">// element? Oh ya, it&#x27;s just an element. Easy.</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;:userId&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Profile</span> <span class="attr">animate</span>=<span class="string">&#123;true&#125;</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Ok, but how do I access the router&#x27;s data, like the URL params</span></span><br><span class="line"><span class="comment">// or the current location?</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Profile</span>(<span class="params">&#123; animate &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> params = useParams();</span><br><span class="line">  <span class="keyword">let</span> location = useLocation();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// But what about components deep in the tree?</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DeepComponent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// oh right, same as anywhere else</span></span><br><span class="line">  <span class="keyword">let</span> navigate = useNavigate();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Aaaaaaaaand we&#x27;re done here.</span></span><br></pre></td></tr></table></figure><p>在 v6 中使用元素 prop 的另一个重要原因是 <code>&lt;Route children&gt;</code> 保留用于嵌套路由。 这是 v3 和 @reach/router 中人们最喜欢的功能之一，我们将在 v6 中恢复它。 将前面示例中的代码更进一步，我们可以将所有 <code>&lt;Route&gt;</code> 元素提升到单个路由配置中：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is a React Router v6 app</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter,</span><br><span class="line">  Routes,</span><br><span class="line">  Route,</span><br><span class="line">  Link,</span><br><span class="line">  Outlet</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Home</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;users&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Users</span> /&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;me&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">OwnUserProfile</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;:id&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">UserProfile</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Users</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;me&quot;</span>&gt;</span>My Profile<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Outlet</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这一步当然是可选的，但对于没有数千条路由的中小型应用程序来说真的很好。</p><p>请注意 <code>&lt;Route&gt;</code> 元素如何自然地嵌套在 <code>&lt;Routes&gt;</code> 元素中。 嵌套路由通过添加到父路由的路径来构建它们的路径。 这次我们不需要 <code>&lt;Route path=&quot;users&quot;&gt;</code> 的尾随 <code>*</code>，因为当路由在一个位置定义时，路由器能够看到所有嵌套的路由。</p><p>当该路由的后代树中的某处有另一个<routes>时，您只需要尾随 *。 在这种情况下，后代<routes>将匹配路径名中剩余的部分（参见前面的示例了解实际情况）。</routes></routes></p><p>当使用嵌套配置时，带有子路由的路由应该渲染一个<outlet>来渲染它们的子路由。 这使得使用嵌套 UI 渲染布局变得容易。</outlet></p><h3 id="lt-Route-path-gt-模式的注意事项"><a href="#lt-Route-path-gt-模式的注意事项" class="headerlink" title="&lt;Route path&gt; 模式的注意事项"></a><code>&lt;Route path&gt;</code> 模式的注意事项</h3><p>React Router v6 使用简化的路径格式。 v6 中的<route path>仅支持 2 种占位符：动态 <code>:id</code>-style params 和 <code>*</code> 通配符。 * 通配符只能用在路径的末尾，不能用在中间。</route></p><p>以下所有都是 v6 中的有效路由路径：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/groups</span><br><span class="line">/groups/admin</span><br><span class="line">/users/:id</span><br><span class="line">/users/:id/messages</span><br><span class="line">/files<span class="comment">/*</span></span><br><span class="line"><span class="comment">/files/:id/*</span></span><br></pre></td></tr></table></figure><p>以下 RegExp 样式的路由路径在 v6 中无效：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/users/:id?</span><br><span class="line"><span class="regexp">/tweets/</span>:id(\d+)</span><br><span class="line">/files<span class="comment">/*/cat.jpg</span></span><br><span class="line"><span class="comment">/files-*</span></span><br></pre></td></tr></table></figure><p>我们在 v4 中添加了对 path-to-regexp 的依赖，以启用更高级的模式匹配。在 v6 中，我们使用了一种更简单的语法，它允许我们以可预测的方式解析路径以进行排名。这也意味着我们可以停止依赖路径到正则表达式，这对包的大小很好。</p><p>如果您正在使用任何路径到正则表达式的更高级语法，则必须将其删除并简化您的路由路径。如果您使用 RegExp 语法进行 URL 参数验证（例如，确保 id 都是数字字符），请知道我们计划在某个时候在 v6 中添加一些更高级的参数验证。现在，您需要将该逻辑移动到路由渲染的组件，并在解析参数后让它分支它的渲染树。</p><p>如果您正在使用<routesensitive>，您应该将其移动到其包含的<routes casesensitive>道具。<routes>元素中的所有路由都区分大小写，或者不区分大小写。</routes></routes></routesensitive></p><p>要注意的另一件事是 v6 中的所有路径匹配都会忽略 URL 上的尾部斜杠。事实上，<route strict>已经被移除，在 v6 中没有任何作用。这并不意味着您不能在需要时使用尾部斜杠。您的应用程序可以决定是否使用尾部斜杠，您只是无法在客户端<route path="edit">和<route path="edit/">处呈现两个不同的 UI。您仍然可以在这些 URL 上呈现两个不同的 UI（尽管我们不推荐这样做），但您必须在服务器端进行。</route></route></route></p><h3 id="关于-lt-Link-to-gt-值的注意事项"><a href="#关于-lt-Link-to-gt-值的注意事项" class="headerlink" title="关于 &lt;Link to&gt; 值的注意事项"></a>关于 <code>&lt;Link to&gt;</code> 值的注意事项</h3><p>在 v5 中，不以 / 开头的<link to>值是不明确的； 这取决于当前的 URL 是什么。 例如，如果当前 URL 是 /users，则 v5<link to="me">将呈现 <a href="/me">。 但是，如果当前 URL 有一个结尾斜杠，例如 /users/，则相同的<link to="me">将呈现 <a href="/users/me">。 这使得很难预测链接的行为方式，因此在 v5 中，我们建议您从根 URL（使用 match.url）构建链接，而不是使用相对的<link to>值。</a></a></p><p>React Router v6 修复了这种歧义。 在 v6 中，<link to="me">将始终呈现相同的 <a href>，而不管当前的 URL。</a></p><p>例如，在<route path="users">中呈现的<link to="me">将始终呈现指向 /users/me 的链接，无论当前 URL 是否具有尾部斜杠。</route></p><p>当您想“向上”链接回父路由时，请在<link to>值中使用前导 <code>..</code> 段，类似于您在 <a href>中所做的。</a></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;users&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Users</span> /&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;:id&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">UserProfile</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Users</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;/* This links to /users - the current route */&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;.&quot;</span>&gt;</span>Users<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;users.map(user =&gt; (</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;/* This links to /users/:id - the child route */&#125;</span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;user.id&#125;</span>&gt;</span>&#123;user.name&#125;<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        ))&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UserProfile</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;/* This links to /users - the parent route */&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;..&quot;</span>&gt;</span>All Users<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;/* This links to /users/:id - the current route */&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;.&quot;</span>&gt;</span>User Profile<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;/* This links to /users/mj - a &quot;sibling&quot; route */&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;../mj&quot;</span>&gt;</span>MJ<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将当前 URL 视为文件系统上的目录路径和<link to>就像 cd 命令行实用程序一样可能会有所帮助。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// If your routes look like this</span></span><br><span class="line">&lt;Route path=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;dashboard&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;stats&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">&lt;/Route&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// and the current URL is /app/dashboard (with or without</span></span><br><span class="line"><span class="comment">// a trailing slash)</span></span><br><span class="line">&lt;Link to=&quot;stats&quot;&gt;               =&gt; &lt;a href=&quot;/app/dashboard/stats&quot;&gt;</span><br><span class="line">&lt;Link to=&quot;../stats&quot;&gt;            =&gt; &lt;a href=&quot;/app/stats&quot;&gt;</span><br><span class="line">&lt;Link to=&quot;../../stats&quot;&gt;         =&gt; &lt;a href=&quot;/stats&quot;&gt;</span><br><span class="line">&lt;Link to=&quot;../../../stats&quot;&gt;      =&gt; &lt;a href=&quot;/stats&quot;&gt;</span><br><span class="line"></span><br><span class="line">// On the command line, if the current directory is /app/dashboard</span><br><span class="line">cd stats                        # pwd is /app/dashboard/stats</span><br><span class="line">cd ../stats                     # pwd is /app/stats</span><br><span class="line">cd ../../stats                  # pwd is /stats</span><br><span class="line">cd ../../../stats               # pwd is /stats</span><br></pre></td></tr></table></figure><p>注意：在匹配和创建相对路径时忽略尾部斜杠的决定并不是我们团队掉以轻心的。我们咨询了一些我们的朋友和客户（他们也是我们的朋友！）。我们发现我们中的大多数人甚至不了解如何使用尾部斜杠处理纯 HTML 相对链接。大多数人猜测它在命令行上像 cd 一样工作（它不是）。另外，HTML 相对链接没有嵌套路由的概念，它们只对 URL 起作用，所以我们不得不在这里开辟自己的道路。 @reach/router 开创了这个先例，并且已经运行了几年。</p><p>除了忽略当前 URL 中的尾部斜杠外，还需要注意的是，当您的<route path>匹配多个时，<link to="..">的行为并不总是像 <a href="..">URL 的一部分。它将根据父路由的路径进行解析，而不是仅删除 URL 的一段，实质上是删除该路由指定的所有路径段。</a></route></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;users&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">          <span class="attr">path</span>=<span class="string">&quot;:id/messages&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">          <span class="attr">element</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            // <span class="attr">This</span> <span class="attr">links</span> <span class="attr">to</span> /<span class="attr">users</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            &lt;<span class="attr">Link</span> <span class="attr">to</span>=<span class="string">&quot;..&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">          &#125;</span></span><br><span class="line"><span class="xml">        /&gt;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这似乎是一个奇怪的选择，让 .. 对路由而不是 URL 段进行操作，但是在使用 * 路由时它是一个巨大的帮助，其中 * 可能匹配不确定数量的段。 在这些情况下，<link to>值中的单个 .. 段基本上可以删除与 * 匹配的任何内容，这使您可以在 * 路由中创建更可预测的链接。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;:userId&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;messages&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">UserMessages</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">          <span class="attr">path</span>=<span class="string">&quot;files/*&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">          <span class="attr">element</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            // <span class="attr">This</span> <span class="attr">links</span> <span class="attr">to</span> /<span class="attr">:userId</span>/<span class="attr">messages</span>, <span class="attr">no</span> <span class="attr">matter</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            // <span class="attr">how</span> <span class="attr">many</span> <span class="attr">segments</span> <span class="attr">were</span> <span class="attr">matched</span> <span class="attr">by</span> <span class="attr">the</span> *</span></span></span><br><span class="line"><span class="tag"><span class="xml">            &lt;<span class="attr">Link</span> <span class="attr">to</span>=<span class="string">&quot;../messages&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">          &#125;</span></span><br><span class="line"><span class="xml">        /&gt;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用-useRoutes-而不是-react-router-config"><a href="#使用-useRoutes-而不是-react-router-config" class="headerlink" title="使用 useRoutes 而不是 react-router-config"></a>使用 useRoutes 而不是 react-router-config</h3><p>v5 的 react-router-config 包中的所有功能都已移入 v6 的核心。 如果你更喜欢/需要将你的路由定义为 JavaScript 对象而不是使用 React 元素，你会喜欢这个。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> element = useRoutes([</span><br><span class="line">    <span class="comment">// These are the same as the props you provide to &lt;Route&gt;</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>, <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">Home</span> /&gt;</span></span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;dashboard&quot;</span>, <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">Dashboard</span> /&gt;</span></span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;invoices&quot;</span>,</span><br><span class="line">      <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">Invoices</span> /&gt;</span></span>,</span><br><span class="line">      <span class="comment">// Nested routes use a children property, which is also</span></span><br><span class="line">      <span class="comment">// the same as &lt;Route&gt;</span></span><br><span class="line">      children: [</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;:id&quot;</span>, <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">Invoice</span> /&gt;</span></span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;sent&quot;</span>, <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">SentInvoices</span> /&gt;</span></span> &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// Not found routes work as you&#x27;d expect</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;*&quot;</span>, <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">NotFound</span> /&gt;</span></span> &#125;</span><br><span class="line">  ]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// The returned element will render the entire element</span></span><br><span class="line">  <span class="comment">// hierarchy with all the appropriate context it needs</span></span><br><span class="line">  <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以这种方式定义的路由遵循与<routes>相同的语义。 事实上，<routes>实际上只是 useRoutes 的一个包装器。</routes></routes></p><p>我们鼓励您尝试使用<routes>和 useRoutes 并自行决定您更喜欢使用哪个。 老实说，我们喜欢并使用它们。</routes></p><p>如果您已经围绕数据获取和呈现服务器端编写了一些自己的逻辑，我们有一个低级别的 matchRoutes 函数可用，类似于我们在 react-router-config 中的函数。</p><h3 id="使用-useNavigate-而不是-useHistory"><a href="#使用-useNavigate-而不是-useHistory" class="headerlink" title="使用 useNavigate 而不是 useHistory"></a>使用 useNavigate 而不是 useHistory</h3><p>React Router v6 引入了一个新的导航 API，它是 <code>&lt;Link&gt;</code> 的同义词，并提供了与启用 suspense 的应用程序更好的兼容性。 我们根据您的风格和需求包含此 API 的命令式和声明式版本。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is a React Router v5 app</span></span><br><span class="line"><span class="keyword">import</span> &#123; useHistory &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> history = useHistory();</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    history.push(<span class="string">&quot;/home&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>go home<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 v6 中，应重写此应用程序以使用导航 API。 大多数情况下，这意味着将 useHistory 更改为 useNavigate 并更改 history.push 或 history.replace 调用站点。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is a React Router v6 app</span></span><br><span class="line"><span class="keyword">import</span> &#123; useNavigate &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> navigate = useNavigate();</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    navigate(<span class="string">&quot;/home&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>go home<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果您需要替换当前位置而不是将新位置推送到历史堆栈中，请使用navigate(to, { replace: true })。 如果您需要状态，请使用navigate(to, { state })。 您可以将导航的第一个参数视为<link to>，将其他参数视为替换和状态道具。</p><p>如果您更喜欢使用声明性 API 进行导航（ala v5 的 Redirect 组件），v6 提供了 Navigate 组件。 像这样使用它：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Navigate &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span> <span class="attr">replace</span> <span class="attr">state</span>=<span class="string">&#123;state&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果您当前正在使用 go、goBack 或 goForward from useHistory 来向后和向前导航，您还应该将这些替换为带有数字参数的导航，指示将指针移动到历史堆栈中的位置。 例如，下面是一些使用 v5 的 useHistory 钩子的代码：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is a React Router v5 app</span></span><br><span class="line"><span class="keyword">import</span> &#123; useHistory &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; go, goBack, goForward &#125; = useHistory();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> go(-2)&#125;&gt;</span></span><br><span class="line"><span class="xml">        Go 2 pages back</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;goBack&#125;</span>&gt;</span>Go back<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;goForward&#125;</span>&gt;</span>Go forward<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> go(2)&#125;&gt;</span></span><br><span class="line"><span class="xml">        Go 2 pages forward</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这是具有 v6 的等效应用程序：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is a React Router v6 app</span></span><br><span class="line"><span class="keyword">import</span> &#123; useNavigate &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> navigate = useNavigate();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> navigate(-2)&#125;&gt;</span></span><br><span class="line"><span class="xml">        Go 2 pages back</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> navigate(-1)&#125;&gt;Go back<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> navigate(1)&#125;&gt;</span></span><br><span class="line"><span class="xml">        Go forward</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> navigate(2)&#125;&gt;</span></span><br><span class="line"><span class="xml">        Go 2 pages forward</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>同样，我们从直接使用历史 API 转向使用导航 API 的主要原因之一是提供与 React suspense 更好的兼容性。 React Router v6 在组件层次结构的根部使用 useTransition 钩子。这让我们在用户交互需要中断挂起的路由转换时提供更流畅的体验，例如，当他们单击指向另一条路由的链接而先前单击的链接仍在加载时。导航 API 知道内部挂起的转换状态，并将执行 REPLACE 而不是 PUSH 到历史堆栈上，因此用户不会在其历史记录中最终获得从未实际加载的页面。</p><p>注意：不再支持 v5 中的<redirect>元素作为路由配置的一部分（在<routes>内）。这是由于 React 中即将发生的变化使得在初始渲染期间更改路由器的状态变得不安全。如果您需要立即重定向，您可以 a) 在您的服务器上执行此操作（可能是最好的解决方案）或 b) 在您的路由组件中呈现一个<navigate>元素。但是，请注意导航将发生在 useEffect 中。</navigate></routes></redirect></p><p>除了悬念兼容性，导航和链接一样，支持相对导航。例如：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// assuming we are at `/stuff`</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SomeForm</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> navigate = useNavigate();</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">form</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">onSubmit</span>=<span class="string">&#123;async</span> <span class="attr">event</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="xml">        let newRecord = await saveDataFromForm(</span></span><br><span class="line"><span class="xml">          event.target</span></span><br><span class="line"><span class="xml">        );</span></span><br><span class="line"><span class="xml">        // you can build up the URL yourself</span></span><br><span class="line"><span class="xml">        navigate(`/stuff/$&#123;newRecord.id&#125;`);</span></span><br><span class="line"><span class="xml">        // or navigate relative, just like Link</span></span><br><span class="line"><span class="xml">        navigate(`$&#123;newRecord.id&#125;`);</span></span><br><span class="line"><span class="xml">      &#125;&#125;</span></span><br><span class="line"><span class="xml">    &gt;</span></span><br><span class="line"><span class="xml">      &#123;/* ... */&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="移除-lt-Link-gt-组件prop"><a href="#移除-lt-Link-gt-组件prop" class="headerlink" title="移除 &lt;Link&gt; 组件prop"></a>移除 <code>&lt;Link&gt;</code> 组件prop</h3><link>不再支持用于覆盖返回的锚标记的组件属性。 这有几个原因。<p>首先，<link>应该几乎总是渲染一个 <a>。 如果您的应用程序没有，那么您的应用程序很有可能存在一些严重的可访问性和可用性问题，这是不好的。 浏览器通过 <a>为我们提供了许多不错的可用性功能，我们希望您的用户免费获得这些功能！</a></a></p><p>话虽如此，也许您的应用程序使用了 CSS-in-JS 库，或者您的设计系统中已经有一个自定义的、花哨的链接组件，而您想要渲染它。 在使用钩子之前的世界中，组件 prop 可能已经足够好用了，但是现在您只需使用我们的几个钩子就可以创建您自己的可访问的 Link 组件：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; FancyPantsLink &#125; <span class="keyword">from</span> <span class="string">&quot;@fancy-pants/design-system&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  useHref,</span><br><span class="line">  useLinkClickHandler</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Link = React.forwardRef(</span><br><span class="line">  <span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">    &#123;</span></span></span><br><span class="line"><span class="params"><span class="function">      onClick,</span></span></span><br><span class="line"><span class="params"><span class="function">      replace = <span class="literal">false</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">      state,</span></span></span><br><span class="line"><span class="params"><span class="function">      target,</span></span></span><br><span class="line"><span class="params"><span class="function">      to,</span></span></span><br><span class="line"><span class="params"><span class="function">      ...rest</span></span></span><br><span class="line"><span class="params"><span class="function">    &#125;,</span></span></span><br><span class="line"><span class="params"><span class="function">    ref</span></span></span><br><span class="line"><span class="params"><span class="function">  </span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> href = useHref(to);</span><br><span class="line">    <span class="keyword">let</span> handleClick = useLinkClickHandler(to, &#123;</span><br><span class="line">      replace,</span><br><span class="line">      state,</span><br><span class="line">      target</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">FancyPantsLink</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        &#123;<span class="attr">...rest</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">href</span>=<span class="string">&#123;href&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">onClick</span>=<span class="string">&#123;event</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="xml">          onClick?.(event);</span></span><br><span class="line"><span class="xml">          if (!event.defaultPrevented) &#123;</span></span><br><span class="line"><span class="xml">            handleClick(event);</span></span><br><span class="line"><span class="xml">          &#125;</span></span><br><span class="line"><span class="xml">        &#125;&#125;</span></span><br><span class="line"><span class="xml">        ref=&#123;ref&#125;</span></span><br><span class="line"><span class="xml">        target=&#123;target&#125;</span></span><br><span class="line"><span class="xml">      /&gt;</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>如果您使用的是 react-router-native，我们提供的 useLinkPressHandler 的工作方式基本相同。 只需在您的链接的 onPress 处理程序中调用该钩子的返回函数即可。</p><p>将 &lt;NavLink <code>exact</code>&gt; 重命名为<navlink end><br>这是一个简单的 prop 重命名，以更好地与 React 生态系统中其他库的通用实践保持一致。</navlink></p><p>从<navlink>中移除 activeClassName 和 activeStyle 道具<br>从 v6.0.0-beta.3 开始，已从 NavLinkProps 中删除了 activeClassName 和 activeStyle 道具。 相反，您可以将函数传递给 style 或 className，这将允许您根据组件的活动状态自定义内联样式或类字符串。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;NavLink</span><br><span class="line">  to=<span class="string">&quot;/messages&quot;</span></span><br><span class="line">- style=&#123;&#123; <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span> &#125;&#125;</span><br><span class="line">- activeStyle=&#123;&#123; <span class="attr">color</span>: <span class="string">&#x27;green&#x27;</span> &#125;&#125;</span><br><span class="line">+ style=&#123;<span class="function">(<span class="params">&#123; isActive &#125;</span>) =&gt;</span> (&#123; <span class="attr">color</span>: isActive ? <span class="string">&#x27;green&#x27;</span> : <span class="string">&#x27;blue&#x27;</span> &#125;)&#125;</span><br><span class="line">&gt;</span><br><span class="line">  Messages</span><br><span class="line">&lt;/NavLink&gt;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;NavLink</span><br><span class="line">  to=<span class="string">&quot;/messages&quot;</span></span><br><span class="line">- className=<span class="string">&quot;nav-link&quot;</span></span><br><span class="line">- activeClassName=<span class="string">&quot;activated&quot;</span></span><br><span class="line">+ className=&#123;<span class="function">(<span class="params">&#123; isActive &#125;</span>) =&gt;</span> <span class="string">&quot;nav-link&quot;</span> + (isActive ? <span class="string">&quot; activated&quot;</span> : <span class="string">&quot;&quot;</span>)&#125;</span><br><span class="line">&gt;</span><br><span class="line">  Messages</span><br><span class="line">&lt;/NavLink&gt;</span><br></pre></td></tr></table></figure><p>如果您更喜欢保留 v5 道具，您可以创建自己的<navlink>作为包装组件，以获得更顺畅的升级路径。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; NavLink <span class="keyword">as</span> BaseNavLink &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> NavLink = React.forwardRef(</span><br><span class="line">  <span class="function">(<span class="params">&#123; activeClassName, activeStyle, ...props &#125;, ref</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">BaseNavLink</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        &#123;<span class="attr">...props</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">className</span>=<span class="string">&#123;(&#123;</span> <span class="attr">isActive</span> &#125;) =&gt;</span></span></span><br><span class="line"><span class="xml">          [</span></span><br><span class="line"><span class="xml">            props.className,</span></span><br><span class="line"><span class="xml">            isActive ? activeClassName : null</span></span><br><span class="line"><span class="xml">          ]</span></span><br><span class="line"><span class="xml">            .filter(Boolean)</span></span><br><span class="line"><span class="xml">            .join(&quot; &quot;)</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">        style=&#123;(&#123; isActive &#125;) =&gt; (&#123;</span></span><br><span class="line"><span class="xml">          ...props.style,</span></span><br><span class="line"><span class="xml">          ...(isActive ? activeStyle : null)</span></span><br><span class="line"><span class="xml">        &#125;)&#125;</span></span><br><span class="line"><span class="xml">      /&gt;</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>从 react-router-dom/server 获取 StaticRouter<br>StaticRouter 组件已移动到一个新的包中：react-router-dom/server。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// change</span></span><br><span class="line"><span class="keyword">import</span> &#123; StaticRouter &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"><span class="comment">// to</span></span><br><span class="line"><span class="keyword">import</span> &#123; StaticRouter &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom/server&quot;</span>;</span><br></pre></td></tr></table></figure><p>进行此更改是为了更紧密地遵循 react-dom 包建立的约定，并帮助用户更好地了解<staticrouter>的用途以及何时应该使用它（在服务器上）。</staticrouter></p><p>用 useMatch 替换 useRouteMatch<br>useMatch 与 v5 的 useRouteMatch 非常相似，但有几个主要区别：</p><p>它使用我们新的路径模式匹配算法<br>现在需要模式参数<br>不再接受一系列模式<br>将模式作为对象传递时，某些选项已重命名以更好地与 v6 中的其他 API 保持一致<br>useRouteMatch({ strict }) 现在是 useMatch({ end })<br>useRouteMatch({sensitive }) 现在是 useMatch({caseSensitive })<br>它返回一个具有不同形状的匹配对象<br>要查看新的 useMatch 钩子及其类型声明的确切 API，请查看我们的 API 参考。</p><h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a><a target="_blank" rel="noopener" href="https://github.com/remix-run/react-router/tree/main/docs">官方文档</a></h2></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Leslie Waong</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://lesliewaong.top/posts/e4b955ad.html">https://lesliewaong.top/posts/e4b955ad.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://lesliewaong.top" target="_blank">Leslie Waong</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/React/">React</a><a class="post-meta__tags" href="/tags/React-Router/">React-Router</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/14.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/wx.png" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/wx.png" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/zfb.png" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/zfb.png" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/7f1a535a.html"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/cover.webp" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">React相关问题</div></div></a></div><div class="next-post pull-right"><a href="/posts/d8a440d1.html"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/6.jpg" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">React</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/46aec6b.html" title="Hook"><img class="cover" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/12.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-02</div><div class="title">Hook</div></div></a></div><div><a href="/posts/7f1a535a.html" title="React相关问题"><img class="cover" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/cover.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-01</div><div class="title">React相关问题</div></div></a></div><div><a href="/posts/d8a440d1.html" title="React"><img class="cover" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/6.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-07</div><div class="title">React</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/avatar.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">Leslie Waong</div><div class="author-info__description">BUPT</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">50</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">108</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Lesliewaong"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Lesliewaong" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=1138964397&amp;website=www.qtxml.cn" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">红雨漂泊泛起了回忆怎么潜</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#React-Router-v6"><span class="toc-text">React-Router v6</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%98%E6%96%B9%E5%8D%9A%E5%AE%A2"><span class="toc-text">官方博客</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-Routes-gt"><span class="toc-text">&lt;Routes&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-Route-path-gt-and-lt-Link-to-gt"><span class="toc-text">&lt;Route path&gt; and &lt;Link to&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1%E5%92%8C%E5%B8%83%E5%B1%80"><span class="toc-text">嵌套路由和布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%B7%AF%E7%94%B1"><span class="toc-text">基于对象的路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Suspense-ready-Navigation"><span class="toc-text">Suspense-ready Navigation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8E-v5-%E5%8D%87%E7%BA%A7"><span class="toc-text">从 v5 升级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91%E5%90%8E%E5%85%BC%E5%AE%B9%E5%8C%85"><span class="toc-text">向后兼容包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%87%E7%BA%A7%E5%88%B0-React-Router-v6"><span class="toc-text">升级到 React Router v6</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%86%E6%89%80%E6%9C%89-lt-Switch-gt-%E5%85%83%E7%B4%A0%E5%8D%87%E7%BA%A7%E4%B8%BA-lt-Routes-gt"><span class="toc-text">将所有 &lt;Switch&gt; 元素升级为 &lt;Routes&gt;</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%AF%B9%E8%B7%AF%E7%94%B1%E5%92%8C%E9%93%BE%E6%8E%A5"><span class="toc-text">相对路由和链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-Route-element-gt-%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-text">&lt;Route element&gt; 的优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-Route-path-gt-%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">&lt;Route path&gt; 模式的注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E-lt-Link-to-gt-%E5%80%BC%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">关于 &lt;Link to&gt; 值的注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-useRoutes-%E8%80%8C%E4%B8%8D%E6%98%AF-react-router-config"><span class="toc-text">使用 useRoutes 而不是 react-router-config</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-useNavigate-%E8%80%8C%E4%B8%8D%E6%98%AF-useHistory"><span class="toc-text">使用 useNavigate 而不是 useHistory</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%BB%E9%99%A4-lt-Link-gt-%E7%BB%84%E4%BB%B6prop"><span class="toc-text">移除 &lt;Link&gt; 组件prop</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3"><span class="toc-text">官方文档</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/d7c881ac.html" title="Express"><img src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/5.webp" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="Express"></a><div class="content"><a class="title" href="/posts/d7c881ac.html" title="Express">Express</a><time datetime="2022-03-15T08:11:03.000Z" title="发表于 2022-03-15 16:11:03">2022-03-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/783ce8a9.html" title="移动端适配"><img src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/15.webp" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="移动端适配"></a><div class="content"><a class="title" href="/posts/783ce8a9.html" title="移动端适配">移动端适配</a><time datetime="2022-03-12T07:04:52.000Z" title="发表于 2022-03-12 15:04:52">2022-03-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/50cb7bb5.html" title="Cookie、Session、Token、JWT"><img src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/3.webp" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="Cookie、Session、Token、JWT"></a><div class="content"><a class="title" href="/posts/50cb7bb5.html" title="Cookie、Session、Token、JWT">Cookie、Session、Token、JWT</a><time datetime="2022-03-11T03:11:11.000Z" title="发表于 2022-03-11 11:11:11">2022-03-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/5c76f87e.html" title="XSS和CSRF"><img src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/12.webp" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="XSS和CSRF"></a><div class="content"><a class="title" href="/posts/5c76f87e.html" title="XSS和CSRF">XSS和CSRF</a><time datetime="2022-03-10T04:01:23.000Z" title="发表于 2022-03-10 12:01:23">2022-03-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/bb028bb1.html" title="HTML语义化"><img src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/11.webp" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="HTML语义化"></a><div class="content"><a class="title" href="/posts/bb028bb1.html" title="HTML语义化">HTML语义化</a><time datetime="2022-03-04T03:14:22.000Z" title="发表于 2022-03-04 11:14:22">2022-03-04</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By Leslie Waong</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><div class="js-pjax"><script>(()=>{const t=document.getElementById("twikoo-count"),o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo-k8ctnwg8j-1138964397-qqcom.vercel.app/",region:""},null))},e=()=>{twikoo.getCommentsCount({envId:"https://twikoo-k8ctnwg8j-1138964397-qqcom.vercel.app/",region:"",urls:[window.location.pathname],includeReply:!1}).then((function(o){t.innerText=o[0].count})).catch((function(t){console.error(t)}))},n=(n=!1)=>{"object"==typeof twikoo?(o(),n&&t&&setTimeout(e,0)):getScript("https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js").then(()=>{o(),n&&t&&setTimeout(e,0)})};btf.loadComment(document.getElementById("twikoo-wrap"),n)})()</script></div><div class="aplayer no-destroy" data-id="6995412795" data-server="tencent" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="random" data-preload="auto" data-autoplay="true" muted></div><script defer id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer color="0,0,255" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async mobile="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.removeEventListener("scroll",window.tocScrollFn),window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":0,"vOffset":0},"mobile":{"show":true,"scale":1},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false,"tagMode":false});</script></body></html>