<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>React实战全栈后台 | Leslie Waong</title><meta name="keywords" content="React,全栈后台"><meta name="author" content="Leslie Waong"><meta name="copyright" content="Leslie Waong"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="React实战全栈后台项目预览：http:&#x2F;&#x2F;lesliewaong.top&#x2F;react-admin-client&#x2F; 准备项目描述 此项目为一个前后台分离的后台管理的 SPA（单页面应用）, 包括前端 PC 应用和后端应用 包括用户管理 &#x2F; 商品分类管理 &#x2F; 商品管理 &#x2F; 权限管理等功能模块 前端: 使用 React 全家桶（函数式组件、react-router V6） + Antd（v4） +"><meta property="og:type" content="article"><meta property="og:title" content="React实战全栈后台"><meta property="og:url" content="https://lesliewaong.top/posts/3bed2a1e.html"><meta property="og:site_name" content="Leslie Waong"><meta property="og:description" content="React实战全栈后台项目预览：http:&#x2F;&#x2F;lesliewaong.top&#x2F;react-admin-client&#x2F; 准备项目描述 此项目为一个前后台分离的后台管理的 SPA（单页面应用）, 包括前端 PC 应用和后端应用 包括用户管理 &#x2F; 商品分类管理 &#x2F; 商品管理 &#x2F; 权限管理等功能模块 前端: 使用 React 全家桶（函数式组件、react-router V6） + Antd（v4） +"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/8.jpg"><meta property="article:published_time" content="2021-12-01T07:22:27.000Z"><meta property="article:modified_time" content="2022-06-22T15:19:54.948Z"><meta property="article:author" content="Leslie Waong"><meta property="article:tag" content="React"><meta property="article:tag" content="全栈后台"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/8.jpg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/avatar.jpg"><link rel="canonical" href="https://lesliewaong.top/posts/3bed2a1e"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"一年之内的产物",messageNext:"技术可能存在过期"},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:50,languages:{author:"作者: Leslie Waong",link:"链接: ",source:"来源: Leslie Waong",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#121212",position:"bottom-left"},source:{jQuery:"https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js",justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js",css:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isanchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"React实战全栈后台",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2022-06-22 23:19:54"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));const n=saveToLocal.get("global-font-size");void 0!==n&&document.documentElement.style.setProperty("--global-font-size",n+"px");const a=()=>{GLOBAL_CONFIG_SITE.isHome&&/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")};a(),document.addEventListener("pjax:complete",a)})(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Leslie Waong" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/avatar.jpg" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">68</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">122</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">20</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-archive"></i><span> 归档</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-book"></i><span> 说说</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时轴</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/List/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/List/gallery/"><i class="fa-fw fa fa-image"></i><span> 相册</span></a></li><li><a class="site-page child" href="/List/movies/"><i class="fa-fw fa fa-film"></i><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/tools/"><i class="fa-fw fa fa-suitcase"></i><span> 百宝箱</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 项目</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/item/Naruto/"><i class="fa-fw fa fa-star"></i><span> 火影</span></a></li><li><a class="site-page child" href="/react-admin-client"><i class="fa-fw fa fa-star"></i><span> One Piece</span></a></li><li><a class="site-page child" href="/item/test/"><i class="fa-fw fa fa-star"></i><span> test</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/bangumis/"><i class="fa-fw fa fa-desktop"></i><span> BiliBili</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/8.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Leslie Waong</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-archive"></i><span> 归档</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-book"></i><span> 说说</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时轴</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/List/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/List/gallery/"><i class="fa-fw fa fa-image"></i><span> 相册</span></a></li><li><a class="site-page child" href="/List/movies/"><i class="fa-fw fa fa-film"></i><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/tools/"><i class="fa-fw fa fa-suitcase"></i><span> 百宝箱</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 项目</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/item/Naruto/"><i class="fa-fw fa fa-star"></i><span> 火影</span></a></li><li><a class="site-page child" href="/react-admin-client"><i class="fa-fw fa fa-star"></i><span> One Piece</span></a></li><li><a class="site-page child" href="/item/test/"><i class="fa-fw fa fa-star"></i><span> test</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/bangumis/"><i class="fa-fw fa fa-desktop"></i><span> BiliBili</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">React实战全栈后台</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-12-01T07:22:27.000Z" title="发表于 2021-12-01 15:22:27">2021-12-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-06-22T15:19:54.948Z" title="更新于 2022-06-22 23:19:54">2022-06-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">14.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>56分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="React实战全栈后台"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="React实战全栈后台"><a href="#React实战全栈后台" class="headerlink" title="React实战全栈后台"></a>React实战全栈后台</h1><p>项目预览：<a href="http://lesliewaong.top/react-admin-client/">http://lesliewaong.top/react-admin-client/</a></p><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><h3 id="项目描述"><a href="#项目描述" class="headerlink" title="项目描述"></a>项目描述</h3><ol><li>此项目为一个<strong>前后台分离</strong>的<strong>后台管理的 SPA</strong>（单页面应用）, 包括前端 PC 应用和后端应用</li><li>包括<strong>用户管理</strong> / <strong>商品分类管理</strong> / <strong>商品管理</strong> / <strong>权限管理</strong>等功能模块</li><li>前端: 使用 <strong>React 全家桶（函数式组件、react-router V6）</strong> + <strong>Antd（v4）</strong> + <strong>Axios</strong> + <strong>ES6</strong> + <strong>Webpack</strong> 等技术</li><li>后端: 使用 <strong>Node</strong> + <strong>Express</strong> + <strong>Mongodb</strong> 等技术</li><li>采用<strong>模块化</strong>、<strong>组件化</strong>、<strong>工程化</strong>的模式开发</li></ol><h3 id="技术选型"><a href="#技术选型" class="headerlink" title="技术选型"></a>技术选型</h3><p><a target="_blank" rel="noopener" href="https://imgtu.com/i/oDk4ZF"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://s4.ax1x.com/2021/12/05/oDk4ZF.png" alt="oDk4ZF.png"></a></p><h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public ---- 静态资源文件夹</span><br><span class="line">	css ------ 和风天气图标字体</span><br><span class="line">	favicon.icon ------ 网站页签图标</span><br><span class="line">	index.html -------- 主页面</span><br><span class="line">	logo192.png ------- logo图</span><br><span class="line">	logo512.png ------- logo图</span><br><span class="line">	manifest.json ----- 应用加壳的配置文件</span><br><span class="line">	robots.txt -------- 爬虫协议文件</span><br><span class="line">src ---- 源码文件夹</span><br><span class="line">	&gt;api -------- ajax相关</span><br><span class="line">    &gt;assets -------- 公用资源</span><br><span class="line">    &gt;components -------- 非路由组件</span><br><span class="line">    &gt;config -------- 配置</span><br><span class="line">    &gt;hooks -------- 自定义hook</span><br><span class="line">    &gt;pages -------- 路由组件</span><br><span class="line">    &gt;utils -------- 工具模块</span><br><span class="line">	App.css -------- App组件的样式</span><br><span class="line">	App.js --------- App组件</span><br><span class="line">	index.js ------- 入口文件</span><br></pre></td></tr></table></figure><h3 id="前端路由"><a href="#前端路由" class="headerlink" title="前端路由"></a>前端路由</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;pages -------- 路由组件</span><br><span class="line">	/login --- 登录</span><br><span class="line">	/ ----主页面</span><br><span class="line">		index --- 主路由 home</span><br><span class="line">		/category --- 分类管理</span><br><span class="line">        /product  --- 商品管理</span><br><span class="line">        	index --- 主路由</span><br><span class="line">        	/detail --- 详情</span><br><span class="line">        	/addupdate --- 添加/更新</span><br><span class="line">        /user --- 用户管理</span><br><span class="line">        /role --- 角色管理</span><br><span class="line">        /charts-bar --- 柱状图</span><br><span class="line">        /charts-pie --- 饼图</span><br><span class="line">        /charts-line --- 线图</span><br><span class="line">	* --- <span class="number">404</span>         </span><br></pre></td></tr></table></figure><h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><p><a target="_blank" rel="noopener" href="https://imgtu.com/i/I0hMlt"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://z3.ax1x.com/2021/11/11/I0hMlt.jpg" alt="I0hMlt.jpg"></a></p><h3 id="npm-yarn-常用命令"><a href="#npm-yarn-常用命令" class="headerlink" title="npm/yarn 常用命令"></a>npm/yarn 常用命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 设置淘宝镜像</span></span><br><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br><span class="line">yarn config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br><span class="line"><span class="comment">## 初始化项目:</span></span><br><span class="line">yarn init -y</span><br><span class="line">npm init -y</span><br><span class="line"><span class="comment">## 下载项目的所有声明的依赖:</span></span><br><span class="line">yarn </span><br><span class="line">npm install</span><br><span class="line"><span class="comment">## 下载指定的运行时依赖包:</span></span><br><span class="line">yarn add webpack@3.2.1</span><br><span class="line">npm install webpack@3.2.1 -S</span><br><span class="line"><span class="comment">## 下载指定的开发时依赖:</span></span><br><span class="line">yarn add webpack@3.2.1 -D</span><br><span class="line">npm install webpack@3.2.1 -D</span><br><span class="line"><span class="comment">## 全局下载指定包:</span></span><br><span class="line">yarn global add webpack</span><br><span class="line">npm install webpack -g</span><br><span class="line"><span class="comment">## 删除依赖包:</span></span><br><span class="line">yarn remove webpack</span><br><span class="line">npm remove webpack -S</span><br><span class="line">yarn global remove webpack</span><br><span class="line">npm remove webpack -g</span><br><span class="line"><span class="comment">## 运行项目中配置的script:</span></span><br><span class="line">yarn run xxx</span><br><span class="line">npm run xxx</span><br><span class="line"><span class="comment">## 查看某个包的信息:</span></span><br><span class="line">yarn info xxx</span><br><span class="line">npm info xxx</span><br></pre></td></tr></table></figure><h3 id="git-常用基本命令"><a href="#git-常用基本命令" class="headerlink" title="git 常用基本命令"></a>git 常用基本命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;username&quot;</span> //配置用户名</span><br><span class="line">git config --global user.email <span class="string">&quot;xx@gmail.com&quot;</span> //配置邮箱</span><br><span class="line">git init //初始化生成一个本地仓库</span><br><span class="line">git add . //添加到暂存区</span><br><span class="line">git commit –m <span class="string">&quot;注释语句&quot;</span> //提交到本地仓库</span><br><span class="line">git remote add origin url //关联到远程仓库</span><br><span class="line">git push origin master //推送本地master分支到远程master分支</span><br><span class="line">git checkout -b dev //创建一个开发分支并切换到新分支</span><br><span class="line">git push ogigin dev //推送本地dev 分支到远程dev 分支</span><br><span class="line">git pull origin dev //从远程dev 分支拉取到本地dev 分支</span><br><span class="line">git <span class="built_in">clone</span> url //将远程仓库克隆下载到本地</span><br><span class="line">git checkout -b dev origin/dev // 克隆仓库后切换到dev 分支</span><br></pre></td></tr></table></figure><h2 id="应用开发详解"><a href="#应用开发详解" class="headerlink" title="应用开发详解"></a>应用开发详解</h2><h3 id="开启项目开发"><a href="#开启项目开发" class="headerlink" title="开启项目开发"></a>开启项目开发</h3><p>使用<code>create-react-app</code>(脚手架)搭建项目</p><p><code>create-react-app</code> 是react 官方提供的用于搭建基于<code>react</code>+<code>webpack</code>+<code>es6</code> 项目的脚手架</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全局下载工具</span></span><br><span class="line">npm install -g create-react-app </span><br><span class="line"><span class="comment"># 下载模板项目</span></span><br><span class="line">create-react-app react-admin-client </span><br><span class="line"><span class="built_in">cd</span> react-admin-client</span><br></pre></td></tr></table></figure><p>编码测试与打包发布项目</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编码, 自动编译打包刷新(live-reload), 查看效果</span></span><br><span class="line">npm start</span><br><span class="line"><span class="comment"># 不一定3000</span></span><br><span class="line">访问: localhost:3000</span><br><span class="line"><span class="comment"># 打包发布</span></span><br><span class="line">npm run build</span><br><span class="line">npm install -g serve</span><br><span class="line">serve build</span><br></pre></td></tr></table></figure><h3 id="git管理项目"><a href="#git管理项目" class="headerlink" title="git管理项目"></a>git管理项目</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">1). 创建远程仓库</span><br><span class="line">2). 创建本地仓库</span><br><span class="line">    a. 配置.gitignore</span><br><span class="line">    b. git init</span><br><span class="line">    c. git add .</span><br><span class="line">    d. git commit -m <span class="string">&quot;init&quot;</span></span><br><span class="line">3). 将本地仓库推送到远程仓库</span><br><span class="line">    git remote add origin url</span><br><span class="line">    git push origin master</span><br><span class="line">4). 在本地创建dev分支, 并推送到远程</span><br><span class="line">    git checkout -b dev</span><br><span class="line">    git push origin dev</span><br><span class="line">5). 如果本地有修改</span><br><span class="line">    git add .</span><br><span class="line">    git commit -m <span class="string">&quot;xxx&quot;</span></span><br><span class="line">    git push origin dev</span><br><span class="line">6). 新的同事: 克隆仓库</span><br><span class="line">    git <span class="built_in">clone</span> url</span><br><span class="line">    git checkout -b dev origin/dev</span><br><span class="line">    git pull origin dev</span><br><span class="line">7). 如果远程修改</span><br><span class="line">    git pull origin dev</span><br></pre></td></tr></table></figure><h3 id="项目源码基本目录设计"><a href="#项目源码基本目录设计" class="headerlink" title="项目源码基本目录设计"></a>项目源码基本目录设计</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">src ---- 源码文件夹</span><br><span class="line">	&gt;api -------- ajax相关</span><br><span class="line">    &gt;assets -------- 公用资源</span><br><span class="line">    &gt;components -------- 非路由组件</span><br><span class="line">    &gt;config -------- 配置</span><br><span class="line">    &gt;hooks -------- 自定义hook</span><br><span class="line">    &gt;pages -------- 路由组件</span><br><span class="line">    &gt;utils -------- 工具模块</span><br><span class="line">	App.js --------- App组件</span><br><span class="line">	index.js ------- 入口文件</span><br></pre></td></tr></table></figure><h3 id="引入antd"><a href="#引入antd" class="headerlink" title="引入antd"></a>引入antd</h3><p><code>antd</code> 是基于 Ant Design 设计体系的 <strong>React UI 组件库</strong>，主要用于研发企业级中后台产品。</p><p><code>craco</code>一个对 create-react-app 进行<strong>自定义配置</strong>的社区解决方案</p><h4 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h4><p><code>yarn add antd</code> 安装 antd<br><code>yarn add @craco/craco</code> 安装 craco<br><code>yarn add craco-less</code> 下载 less ，支持 less 格式文件</p><h4 id="package-json-中修改属性"><a href="#package-json-中修改属性" class="headerlink" title="package.json 中修改属性"></a>package.json 中修改属性</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;start&quot;</span>: <span class="string">&quot;craco start&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;craco build&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;craco test&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;eject&quot;</span>: <span class="string">&quot;react-scripts eject&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h4 id="根目录创建-craco-config-js-文件"><a href="#根目录创建-craco-config-js-文件" class="headerlink" title="根目录创建 craco.config.js 文件"></a>根目录创建 craco.config.js 文件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CracoLessPlugin = <span class="built_in">require</span>(<span class="string">&#x27;craco-less&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">plugin</span>: CracoLessPlugin,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">lessLoaderOptions</span>: &#123;</span><br><span class="line">          <span class="attr">lessOptions</span>: &#123;</span><br><span class="line">            <span class="attr">modifyVars</span>: &#123; <span class="string">&#x27;@primary-color&#x27;</span>: <span class="string">&#x27;#1DA57A&#x27;</span> &#125;,</span><br><span class="line">            <span class="attr">javascriptEnabled</span>: <span class="literal">true</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="引入-less-文件"><a href="#引入-less-文件" class="headerlink" title="引入 less 文件"></a>引入 less 文件</h4><p>在 src 目录下的 index.js 文件中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;antd/dist/antd.less&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="某个组件中使用antd组件"><a href="#某个组件中使用antd组件" class="headerlink" title="某个组件中使用antd组件"></a>某个组件中使用antd组件</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Button&#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">			<span class="tag">&lt;<span class="name">Button</span>&gt;</span>点击一下<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="xml">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="引入路由"><a href="#引入路由" class="headerlink" title="引入路由"></a>引入路由</h3><p><code>yarn add react-router-dom</code></p><h3 id="Login组件-不与后台交互"><a href="#Login组件-不与后台交互" class="headerlink" title="Login组件(不与后台交互)"></a>Login组件(不与后台交互)</h3><p>静态组件</p><p>前台表单验证与数据收集</p><h3 id="运行server-端项目"><a href="#运行server-端项目" class="headerlink" title="运行server 端项目"></a>运行server 端项目</h3><blockquote><p>该项目是一个前后台分离的项目: 前台应用与后台应用</p><p>后台应用负责处理前台应用提交的请求, 并给前台应用返回json 数据</p><p>前台应用负责展现数据, 与用户交互, 与后台应用交互</p></blockquote><h4 id="运行后台应用"><a href="#运行后台应用" class="headerlink" title="运行后台应用"></a>运行后台应用</h4><ol><li>确保启动<code>mongodb</code>服务</li><li>启动服务器应用: <code>npm start</code></li></ol><h4 id="使用postman工具测试接口"><a href="#使用postman工具测试接口" class="headerlink" title="使用postman工具测试接口"></a>使用postman工具测试接口</h4><ol><li>postman 是用来测试API 接口的工具</li></ol><ol start="2"><li>postman 可以看作活接口文档</li></ol><p><a target="_blank" rel="noopener" href="https://imgtu.com/i/I6q0EQ"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://z3.ax1x.com/2021/11/14/I6q0EQ.png" alt="I6q0EQ.png"></a></p><h3 id="前后台交互ajax"><a href="#前后台交互ajax" class="headerlink" title="前后台交互ajax"></a>前后台交互ajax</h3><p><code>yarn add axios</code></p><h4 id="Promise-async-await"><a href="#Promise-async-await" class="headerlink" title="Promise+ async + await"></a>Promise+ async + await</h4><h4 id="配置代理"><a href="#配置代理" class="headerlink" title="配置代理"></a>配置代理</h4><p>package.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;proxy&quot;</span>: <span class="string">&quot;http://localhost:5000&quot;</span></span><br></pre></td></tr></table></figure><h4 id="请求测试-login-jsx"><a href="#请求测试-login-jsx" class="headerlink" title="请求测试: login.jsx"></a>请求测试: login.jsx</h4><h3 id="Login-组件-完成登陆功能"><a href="#Login-组件-完成登陆功能" class="headerlink" title="Login 组件(完成登陆功能)"></a>Login 组件(完成登陆功能)</h3><blockquote><p>维持登陆与自动登陆</p></blockquote><p><code>yarn add store</code></p><p>store.js 是一个兼容所有浏览器的 <strong>LocalStorage 包装器</strong>，不需要借助 Cookie 或者 Flash。store.js 会根据浏览器自动选择使用 localStorage、globalStorage 或者 userData 来实现本地存储功能。</p><h3 id="Admin-组件-搭建整体结构"><a href="#Admin-组件-搭建整体结构" class="headerlink" title="Admin 组件(搭建整体结构)"></a>Admin 组件(搭建整体结构)</h3><p>LeftNav组件 Header组件 Admin组件</p><h3 id="Admin-的子路由"><a href="#Admin-的子路由" class="headerlink" title="Admin 的子路由"></a>Admin 的子路由</h3><p>注意v6的更改</p><h3 id="LeftNav组件"><a href="#LeftNav组件" class="headerlink" title="LeftNav组件"></a>LeftNav组件</h3><p><code>defaultOpenKeys=&#123;[openKey]&#125;</code>目前使用<code>useMemo</code>实现，后续再优化</p><h3 id="Header-组件"><a href="#Header-组件" class="headerlink" title="Header 组件"></a>Header 组件</h3><h3 id="Home-界面"><a href="#Home-界面" class="headerlink" title="Home 界面"></a>Home 界面</h3><h3 id="分类管理"><a href="#分类管理" class="headerlink" title="分类管理"></a>分类管理</h3><p><code>yarn add react-draft-wysiwyg draftjs-to-html draft-js</code></p><h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h2><h3 id="模块化、组件化、工程化"><a href="#模块化、组件化、工程化" class="headerlink" title="模块化、组件化、工程化"></a>模块化、组件化、工程化</h3><h4 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h4><p>后端：<strong>CommonJS</strong> :<code>module.exports</code>、<code>require</code>方法用于加载模块。</p><p>前端：<strong>ES6</strong> 模块化语法：export 和 import；</p><h4 id="工程化"><a href="#工程化" class="headerlink" title="工程化"></a>工程化</h4><p><code>webpack</code>最热门的前端资源模块化管理和打包工具、</p><p><code>create-react-app</code> 脚手架初始化react 项目开发、</p><p><code>ESLint</code> 插件化的 JavaScript 代码检测工具</p><h4 id="组件化"><a href="#组件化" class="headerlink" title="组件化"></a>组件化</h4><p>其中以React的组件化最为彻底,甚至可以到函数级别的原子组件,高度的组件化可以是我们的工程易于维护、易于组合拓展。</p><p>理解:<strong>用来实现局部功能效果的代码和资源的集合(html/css/js/img等等)</strong></p><p>为什么要用组件:一个界面的功能复杂</p><p>作用:<strong>复用编码,简化项目编码,提高运行效率</strong></p><p>当应用是以多组件的方式实现,这个应用就是组件化的应用。</p><h3 id="后端数据"><a href="#后端数据" class="headerlink" title="后端数据"></a>后端数据</h3><p>Node + Express + Mongodb等技术。</p><p>Node.js 使用 JavaScript 语言开发服务器端应用；Express是基于 Node.js平台，快速、开放、极简的 Web 开发框架；MongoDB 是一个基于分布式文件存储的数据库。由 C++ 语言编写。旨在为 WEB 应用提供可扩展的高性能数据存储解决方案。MongoDB 是一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。</p><p>MySQL 是一个开源的关系数据库，其中的数据存于表中，数据中的某些属性可以跟其他表建立关系。</p><p>MongoDB 也是开源的，但它属于文档型数据库。因此，它没有记录的概念，它的数据模不固定，所以它是一种动态灵活的数据库，可以插入大量数据。</p><p>在选定最佳数据库之前，特定的<strong>业务需求和项目的优先事项</strong>应当是清晰确定的，正如前文提到的，在处理大量数据方面，MongoDB 比 MySQL 更胜一筹。另外，在云计算服务和需求频繁变化的项目上，MongoDB 也是如此。</p><p>相反，MySQL 中数据结构和模式是固定的，因此保证了数据一致性和可靠性。使用 MySQL 还有一个好处，就是由于它支持基于 ACID 准则的事务操作，数据安全性更高。所以对于看重这些因素的项目来说，MySQL 是最合适的。</p><h4 id="MongoDB-的安装与配置"><a href="#MongoDB-的安装与配置" class="headerlink" title="MongoDB 的安装与配置"></a>MongoDB 的安装与配置</h4><p>下载：<a target="_blank" rel="noopener" href="https://www.mongodb.com/try/download/ops-manager">https://www.mongodb.com/try/download/ops-manager</a></p><p>配置path: 将mongodb下的bin目录配置到path环境变量中</p><h4 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h4><p>使用<strong>mongoDB Compass</strong></p><p>连接服务器：<code>mongodb://localhost/server_db2</code></p><p>可以手动输入，也可以导入json</p><h3 id="天气API"><a href="#天气API" class="headerlink" title="天气API"></a>天气API</h3><h4 id="和风天气（不需要跨域处理）"><a href="#和风天气（不需要跨域处理）" class="headerlink" title="和风天气（不需要跨域处理）"></a>和风天气（不需要跨域处理）</h4><p>get请求</p><p><a target="_blank" rel="noopener" href="https://dev.qweather.com/">开发文档</a></p><p>将和风天气图标安装在你的项目中，包括SVG图标、图标字体等等。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i qweather-icons</span><br></pre></td></tr></table></figure><p>在public下的HTML引入<code>&lt;link rel=&quot;stylesheet&quot; href=&quot;%PUBLIC_URL%/css/qweather-icons.css&quot;&gt;</code>，注意还要导入一个font文件，在对应位置即可使用图标字体显示天气图标。picUrl即请求到的图标的代码。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;i className=&#123;<span class="string">&quot;qi-&quot;</span>+picUrl+<span class="string">&quot;-fill&quot;</span>&#125; style=&#123;&#123;<span class="attr">color</span>:<span class="string">&#x27;black&#x27;</span>,<span class="attr">fontSize</span>:<span class="string">&#x27;17px&#x27;</span>,<span class="attr">margin</span>:<span class="string">&#x27;0 15px&#x27;</span>&#125;&#125;/&gt;</span><br></pre></td></tr></table></figure><h3 id="less"><a href="#less" class="headerlink" title="less"></a>less</h3><p>less是一门css的预处理语言</p><ul><li>less是一个css的增强版，通过less可以<strong>编写更少的代码实现更强大的样式</strong>，添加了许多的新特性：像对<strong>变量</strong>的支持、对<strong>mixin</strong>的支持… …</li><li>less的语法大体上和css语法一致，但是less中增添了许多对css的扩展，所以浏览器无法直接执行less代码，要执行必须向将<strong>less转换为css</strong>，然后再由浏览器执行</li></ul><p>特点</p><ul><li><strong>结构写的更加清晰</strong></li><li>变量 <code>@变量名</code></li><li><code>&amp;</code> 表示外层的父元素 <code>&amp;::after</code> <code>&amp;:hover</code></li><li><code>:extend()</code> 对当前选择器扩展指定选择器的样式（选择器分组）</li></ul><h3 id="界面"><a href="#界面" class="headerlink" title="界面"></a>界面</h3><h4 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h4><p>Flex absolute float</p><h4 id="登录界面"><a href="#登录界面" class="headerlink" title="登录界面"></a>登录界面</h4><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="C:\Users\Lesliewaong\AppData\Roaming\Typora\typora-user-images\image-20220313161250827.png" alt="image-20220313161250827"></p><blockquote><p>气泡背景原理：</p></blockquote><p><strong>background</strong>可以设置多个，默认地，每个背景图像在水平和垂直方向上重复。因此，通过设置多个背景图像的位置和大小产生重叠效果。</p><p>气泡：</p><p><code>radial-gradient</code>+<code>rgba</code></p><p>开始和结束的透明度都设为0。</p><p>通过两个确定位置的固定色值（有一定透明度的白色），实现渐变效果。</p><p>radial-gradient(rgba(255,255,255,0) 0, rgba(255,255,255,.15) 30%, rgba(255,255,255,.3) 32%, rgba(255,255,255,0) 33%)</p><blockquote><p>边框</p></blockquote><p><code>box-shadow</code> 内外阴影效果。</p><blockquote><p>颜色</p></blockquote><p><code>transparent</code> 关键字表示一个完全透明的颜色，即该颜色看上去将是背景色。从技术上说，它是带有阿尔法通道为最小值的黑色，是 <code>rgba(0,0,0,0)</code> 的简写。</p><p><strong>RGB</strong></p><p>颜色可以使用红-绿-蓝（red-green-blue (RGB)）模式的两种方式被定义。</p><p>RGB颜色可以通过以<code>#</code>为前缀的<strong>十六进制字符</strong>和<strong>函数</strong>（<code>rgb()</code>、<code>rgba()</code>）标记表示。</p><p>在CSS 颜色标准 4 中，<code>rgba()</code>是<code>rgb()</code>的别称。在实行第4级标准的浏览器中，它们接受相同的参数，作用效果也相同。</p><p><code>rgb[a](R, G, B[, A])</code></p><p><code>rgb[a](R G B[ / A])</code> CSS 颜色级别 4 支持用空格分开的值。</p><p><code>R</code>（红）、<code>G</code>（绿）、<code>B</code> （蓝）可以是数字或百分比，255相当于100%。<code>A</code>（alpha）可以是<code>0</code>到<code>1</code>之间的数字，或者百分比，数字<code>1</code>相当于<code>100%</code>（完全不透明）。</p><p><strong>HSL</strong></p><p>颜色也可以使用 <code>hsl()</code> 函数符被定义为<strong>色相</strong>-<strong>饱和度</strong>-<strong>亮度</strong>（Hue-saturation-lightness）模式。HSL 相比 RGB 的优点是更加直观：你可以估算你想要的颜色，然后微调。它也更易于创建相称的颜色集合。（通过保持相同的色相并改变亮度/暗度和饱和度）。</p><p>HSL 颜色通过功能<code>hsl()</code>和<code>hsla()</code>符号表示。</p><p>从 CSS 颜色级别 4 开始，<code>hsla()</code>是<code>hsl()</code>在实现 4 级标准的浏览器中，它们接受相同的参数并以相同的方式运行。</p><p><code>hsl[a](H, S, L[, A])</code> <code>hsl[a](H S L[ / A])</code></p><p><code>H</code>(hue) 是度数deg，<code>S</code>（饱和度）和<code>L</code>（亮度）是百分比。</p><blockquote><p>背景毛玻璃</p></blockquote><p><code>backdrop-filter: blur(5px);</code></p><p>该属性可以让你为一个元素后面区域添加图形效果（如模糊或颜色偏移）。 因为它适用于元素背后的所有元素，为了看到效果，必须使元素或其背景至少部分透明。</p><blockquote><p>头像旋转</p></blockquote><p><code>animation</code>+<code>transform: rotate</code></p><h3 id="居中布局"><a href="#居中布局" class="headerlink" title="居中布局"></a>居中布局</h3><h4 id="Flex"><a href="#Flex" class="headerlink" title="Flex"></a>Flex</h4><p><code>flex + justify-content + align-items</code></p><h4 id="margin"><a href="#margin" class="headerlink" title="margin"></a>margin</h4><p><code>margin: 0 auto</code></p><h4 id="图片与文字在一行内的居中问题"><a href="#图片与文字在一行内的居中问题" class="headerlink" title="图片与文字在一行内的居中问题"></a>图片与文字在一行内的居中问题</h4><p>父元素开启Flex并设置<code>align-items: center</code>，图片可以正常居中，但文字不行，文字（h1中）会自动添加一个下边距，应该是文字与图片对齐方式不同导致的。</p><p>一种方法是文字里添加<code>margin-bottom:0;</code></p><p>另一种方法是图片和文字采用不同方法居中，父元素开启Flex使它们都在一行，但不设置<code>align-items: center</code>，给图片设置<code>align-self:center;</code>使其垂直居中，文字设置<code>line-height值等于父元素的height</code>。</p><h3 id="类式组件与函数式组件"><a href="#类式组件与函数式组件" class="headerlink" title="类式组件与函数式组件"></a>类式组件与函数式组件</h3><blockquote><p>因为React-Router v6正式版的更新，类式路由组件很多功能不易完成，比如无法直接操作history。另外React-Router官方推荐使用函数式组件。</p></blockquote><p>类式组件</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; BrowserRouter <span class="keyword">as</span> Router,Routes, Route &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">&#x27;./pages/login&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Admin <span class="keyword">from</span> <span class="string">&#x27;./pages/admin&#x27;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  根组件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 自定义方法：赋值语句的形式+箭头函数</span></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">//render是放在哪里的？—— MyComponent的原型对象上，供实例使用。</span></span><br><span class="line">        <span class="comment">//render中的this是谁？—— MyComponent的实例对象 &lt;=&gt; MyComponent组件实例对象。</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;render中的this:&#x27;</span>,<span class="built_in">this</span>);</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">Router</span>&gt;</span></span></span><br><span class="line"><span class="xml">                &#123;/* React-Router v6新特性 <span class="tag">&lt;<span class="name">Switch</span>&gt;</span>重命名为<span class="tag">&lt;<span class="name">Routes</span>&gt;</span><span class="tag">&lt;/<span class="name">Routes</span>&gt;</span> </span></span><br><span class="line"><span class="xml">                   component重命名为element </span></span><br><span class="line"><span class="xml">                */&#125;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Routes</span>&gt;</span> </span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/login&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Login</span>/&gt;</span>&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Admin</span>/&gt;</span>&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        )</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure><p>函数式组件</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; BrowserRouter <span class="keyword">as</span> Router, Routes, Route &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">&#x27;./pages/login&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Admin <span class="keyword">from</span> <span class="string">&#x27;./pages/admin&#x27;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  根组件(函数式)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>); <span class="comment">//此处的this是undefined，因为babel编译后开启了严格模式</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">Router</span>&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;/* React-Router v6新特性 <span class="tag">&lt;<span class="name">Switch</span>&gt;</span>重命名为<span class="tag">&lt;<span class="name">Routes</span>&gt;</span><span class="tag">&lt;/<span class="name">Routes</span>&gt;</span> </span></span><br><span class="line"><span class="xml">                   component重命名为element </span></span><br><span class="line"><span class="xml">                */&#125;</span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/login&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Login</span> /&gt;</span>&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Admin</span> /&gt;</span>&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    )</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br></pre></td></tr></table></figure><h3 id="React-Router-v6-新特性"><a href="#React-Router-v6-新特性" class="headerlink" title="React-Router v6 新特性"></a>React-Router v6 新特性</h3><h4 id="SPA的理解"><a href="#SPA的理解" class="headerlink" title="SPA的理解"></a>SPA的理解</h4><ul><li>单页Web应用（single page web application，SPA）。</li><li>整个应用只有<strong>一个完整的页面</strong>。</li><li>点击页面中的链接<strong>不会刷新</strong>页面，只会做页面的<strong>局部更新。</strong></li><li>数据都需要通过ajax请求获取, 并在前端异步展现。</li></ul><h4 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h4><p>React Router v6 大量使用<a target="_blank" rel="noopener" href="https://reactjs.org/docs/hooks-intro.html">React hooks</a>。官方明确推荐<strong>函数式组件</strong>了。</p><p><code>Routes</code>是以前 <code>Switch</code> 组件的升级版，它包括相对路由和链接、自动路由排名、嵌套路由和布局等功能。</p><p><code>component</code>重命名为<code>element</code>。</p><p>v6的<code>&lt;Routes&gt;</code>元素下的所有<code>&lt;Route path</code>&gt;和<code>&lt;Link to&gt;</code>值都是<strong>自动相对于它们的父路由渲染的</strong>，而且忽略当前URL中的尾部斜杠。头部斜杠代变绝对路径。</p><p>中小型项目<strong>嵌套路由可集中显示</strong>，在需要显示的地方使用<code>&lt;Outlet /&gt;</code>作为占位符。</p><p>若<strong>分别显示</strong>，具有后代路由（在其他组件中定义）的路由在其路径中使用尾随<code>*</code> 。</p><p>“默认子路由”：<code>index</code>（不写path）表示索引路由共享父路径。这就是重点——它没有路径。</p><p>“未找到”路由：<code>path=&#39;*&#39;</code>表示路径都不匹配时。具有最弱的优先级。</p><p>v6 提供了 <strong>Navigate</strong> 组件，以前版本中的<code>Redirect</code>组件也消失了。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  根组件(函数式)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;login&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Login</span> /&gt;</span>&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Admin</span> /&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Route</span> <span class="attr">index</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Home</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;category&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Category</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;product&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Product</span> /&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">index</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">ProductHome</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;detail&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">ProductDetail</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;addupdate&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">ProductAddUpdate</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;user&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">User</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;role&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Role</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;charts-bar&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Bar</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;charts-pie&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Pie</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;charts-line&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Line</span> /&gt;</span>&#125; /&gt;    </span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;/* 以上路径都不匹配时 */&#125;</span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;*&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">NotFound</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 后台管理的路由组件</span></span><br><span class="line"><span class="comment"> *  */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Admin</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> user = memoryUtils.user</span><br><span class="line">    <span class="comment">// 如果内存没有存储user ==&gt; 当前没有登陆</span></span><br><span class="line">    <span class="keyword">if</span> (!user || !user._id) &#123;</span><br><span class="line">        <span class="comment">// 自动跳转到登陆(在render()中) Navigate替代Redirect</span></span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&#x27;/login&#x27;</span> /&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        ...     </span><br><span class="line">        &lt;Outlet /&gt;&#123;<span class="comment">/* 占位符 */</span>&#125;</span><br><span class="line">    	...</span><br><span class="line"></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>v6 <strong>无法直接访问history实例</strong>，将useHistory更改为 <strong>useNavigate</strong>（兼容性和体验）。</p><p>useNavigate返回一个函数用来实现编程式导航。</p><p>传入数值进行前进或后退，类似于5.x中的 history.go()方法 <code>navigate(-1)</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useNavigate &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 登录的路由组件(函数式组件)</span></span><br><span class="line"><span class="comment"> * 类式路由组件在onFinish中拿不到history</span></span><br><span class="line"><span class="comment"> *  */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Login</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> navigate = useNavigate();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提交表单且数据验证成功后回调事件</span></span><br><span class="line">    <span class="keyword">const</span> onFinish = <span class="keyword">async</span> values =&gt; &#123;</span><br><span class="line">			...</span><br><span class="line">            <span class="comment">// 跳转到管理界面 (不需要再回退回到登陆)</span></span><br><span class="line">            navigate(<span class="string">&#x27;/&#x27;</span>, &#123; <span class="attr">replace</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">       ...</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>v5:<strong>withRouter</strong>高阶组件:包装非路由组件, 返回一个新的组件，新的组件向非路由组件传递3个属性: <code>history/location/match</code></p><p>v6:<strong>非路由组件</strong>使用<code>useLocation</code>也可得到<code>location</code>对象，<code>withRouter</code>不再使用。<code>useLocation().pathname</code>得到当前路径名。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> location =useLocation();</span><br><span class="line"><span class="keyword">const</span> path = location.pathname;</span><br><span class="line"></span><br><span class="line"><span class="comment">// location对象</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">hash</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">key</span>: <span class="string">&quot;hvfbi1fy&quot;</span></span><br><span class="line">    <span class="attr">pathname</span>: <span class="string">&quot;/role&quot;</span></span><br><span class="line">    <span class="attr">search</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">state</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>useRoutes</code>钩子是一个路由API，它允许你使用<strong>JavaScript对象</strong>而不是React元素来声明和组合路由。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> element = useRoutes([</span><br><span class="line">    <span class="comment">// 这些与您提供给 &lt;Route&gt; 的props相同</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>, <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">Home</span> /&gt;</span></span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;dashboard&quot;</span>, <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">Dashboard</span> /&gt;</span></span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;invoices&quot;</span>,</span><br><span class="line">      <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">Invoices</span> /&gt;</span></span>,</span><br><span class="line">      <span class="comment">// 嵌套路由使用 children 属性，这也与 &lt;Route&gt; 相同</span></span><br><span class="line">      children: [</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;:id&quot;</span>, <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">Invoice</span> /&gt;</span></span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&quot;sent&quot;</span>, <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">SentInvoices</span> /&gt;</span></span> &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// Not found routes work as you&#x27;d expect</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;*&quot;</span>, <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">NotFound</span> /&gt;</span></span> &#125;,</span><br><span class="line">  ]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 返回的元素将呈现整个元素层次结构及其所需的所有适当上下文</span></span><br><span class="line">  <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Link</strong></p><p>标签体内容也是一种特殊的标签属性。</p><p>在 v5 中，不以 / 开头的 <code>&lt;Link to&gt;</code> 值是不明确的； 这取决于当前的 URL 是什么。 例如，如果当前 URL 是 /users，则 v5 <code>&lt;Link to=&quot;me&quot;&gt;</code> 将呈现 <code>&lt;a href=&quot;/me&quot;&gt;</code>。 但是，如果当前 URL 有一个结尾斜杠，例如 /users/，则相同的 <code>&lt;Link to=&quot;me&quot;&gt;</code> 将呈现 <code>&lt;a href=&quot;/users/me&quot;&gt;</code>。 这使得很难预测链接的行为方式，因此在 v5 中，我们建议您从根 URL（使用 match.url）构建链接，而不是使用相对的 <code>&lt;Link to&gt;</code> 值。</p><p>React Router v6 修复了这种歧义。 在 v6 中，<code>&lt;Link to=&quot;me&quot;&gt;</code> 将始终呈现相同的 <code>&lt;a href&gt;</code>，而不管当前的 URL。</p><p>例如，在 <code>&lt;Route path=&quot;users&quot;&gt;</code> 中呈现的 <code>&lt;Link to=&quot;me&quot;&gt;</code> 将始终呈现指向 /users/me 的链接，无论当前 URL 是否具有尾部斜杠。</p><p>当您想“向上”链接回父路由时，请在 <code>&lt;Link to&gt;</code> 值中使用前导 <code>..</code> 段，类似于您在 <code>&lt;a href&gt;</code> 中所做的。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;users&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Users</span> /&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;:id&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">UserProfile</span> /&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Users</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;/* This links to /users - the current route */&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;.&quot;</span>&gt;</span>Users<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;users.map(user =&gt; (</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;/* This links to /users/:id - the child route */&#125;</span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;user.id&#125;</span>&gt;</span>&#123;user.name&#125;<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        ))&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UserProfile</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;/* This links to /users - the parent route */&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;..&quot;</span>&gt;</span>All Users<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;/* This links to /users/:id - the current route */&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;.&quot;</span>&gt;</span>User Profile<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;/* This links to /users/mj - a &quot;sibling&quot; route */&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;../mj&quot;</span>&gt;</span>MJ<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="路由参数传递"><a href="#路由参数传递" class="headerlink" title="路由参数传递"></a>路由参数传递</h4><h5 id="param参数"><a href="#param参数" class="headerlink" title="param参数"></a>param参数</h5><ul><li>在<code>Route组件</code>中的<code>path属性</code>中定义路径参数</li><li>在组件内通过<code>useParams</code> hook访问路径参数</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义参数</span></span><br><span class="line">&lt;BrowserRouter&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/foo/:id&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;Foo&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line">&lt;/BrowserRouter&gt;</span><br><span class="line"><span class="comment">// 传递参数</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">LinkButton</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> navigate(`addupdate/$&#123;product.id&#125;`)&#125; &gt;</span></span><br><span class="line"><span class="xml">    修改</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">LinkButton</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 提取参数</span></span><br><span class="line"><span class="keyword">import</span> &#123; useParams &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> params = useParams();</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;params.id&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>个人理解：param参数适合传递一个参数时使用。</strong></p><p><strong>useMatch</strong>()</p><ol><li><p>作用：返回当前匹配信息，对标5.x中的路由组件的<code>match</code>属性。</p></li><li><p>示例代码：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=<span class="string">&quot;/login/:page/:pageSize&quot;</span> element=&#123;<span class="xml"><span class="tag">&lt;<span class="name">Login</span> /&gt;</span></span>&#125;/&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">to</span>=<span class="string">&quot;/login/1/10&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">NavLink</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Login</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> match = useMatch(<span class="string">&#x27;/login/:x/:y&#x27;</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(match) <span class="comment">//输出match对象</span></span><br><span class="line">  <span class="comment">//match对象内容如下：</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  	&#123;</span></span><br><span class="line"><span class="comment">      params: &#123;x: &#x27;1&#x27;, y: &#x27;10&#x27;&#125;</span></span><br><span class="line"><span class="comment">      pathname: &quot;/LoGin/1/10&quot;  </span></span><br><span class="line"><span class="comment">      pathnameBase: &quot;/LoGin/1/10&quot;</span></span><br><span class="line"><span class="comment">      pattern: &#123;</span></span><br><span class="line"><span class="comment">      	path: &#x27;/login/:x/:y&#x27;, </span></span><br><span class="line"><span class="comment">      	caseSensitive: false, </span></span><br><span class="line"><span class="comment">      	end: false</span></span><br><span class="line"><span class="comment">      &#125;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">  	<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h5 id="search参数-amp-sate参数"><a href="#search参数-amp-sate参数" class="headerlink" title="search参数&amp;sate参数"></a>search参数&amp;sate参数</h5><p>Location：这是一个 React Router 特定的对象，它基于内置浏览器的 window.location 对象。 它代表“用户在哪里”。 它主要是 URL 的对象表示，但比这更多。</p><p>location state：与 URL 中未编码的位置保持一致的值。 很像哈希或搜索参数（在 URL 中编码的数据），但不可见地存储在浏览器的内存中。</p><p>您可以通过两种方式设置<code>location state</code>在<code>&lt;Link&gt;</code>上或<code>navigate</code>上，在下一路由组件中你可以用<code>useLocation</code>来访问它。</p><p><code>useLocation()</code>既可以获得<code>state</code>参数，也可以获得<code>search</code>参数。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinkButton onClick=&#123;<span class="function">() =&gt;</span> navigate(<span class="string">&#x27;addupdate?name=tom&amp;age=18&#x27;</span>, &#123; <span class="attr">state</span>: product &#125;)&#125; &gt;</span><br><span class="line">    修改</span><br><span class="line">&lt;/LinkButton&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isUpdate = location.state</span><br><span class="line"><span class="keyword">const</span> search = location.search</span><br><span class="line"><span class="built_in">console</span>.log(search) <span class="comment">// ?name=tom&amp;age=18</span></span><br><span class="line"><span class="built_in">console</span>.log(isUpdate) <span class="comment">// &#123;status: 1, imgs: Array(2), _id: &#x27;5e12b97de31bb727e4b0e349&#x27;, name: &#x27;联想ThinkPad 翼4809&#x27;, desc: &#x27;年度重量级新品，X390、T490全新登场 更加轻薄机身设计9&#x27;, …&#125;</span></span><br></pre></td></tr></table></figure><p><strong>个人理解：state参数适合传js对象。</strong></p><p><code>search</code>参数一般使用<code>useSearchParams()</code>进行获取和修改。</p><ol><li>作用：用于读取和修改当前位置的 URL 中的查询字符串。</li><li>返回一个包含两个值的数组，内容分别为：当前的seaech参数、更新search的函数。</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [search,setSearch] = useSearchParams()</span><br><span class="line"><span class="keyword">const</span> age = search.get(<span class="string">&#x27;age&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> name = search.get(<span class="string">&#x27;name&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>个人理解：search参数适合传可能会被修改的参数。</strong></p><h3 id="Antd-v3升级成v4"><a href="#Antd-v3升级成v4" class="headerlink" title="Antd v3升级成v4"></a>Antd v3升级成v4</h3><h4 id="去除-Form-create"><a href="#去除-Form-create" class="headerlink" title="去除 Form.create"></a>去除 Form.create</h4><p>v4 的 Form 不再需要通过 <code>Form.create()</code> 创建上下文。Form 组件现在自带数据域，因而 <code>getFieldDecorator</code> 也不再需要，直接写入 Form.Item 即可：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v3</span></span><br><span class="line"><span class="keyword">const</span> Demo = <span class="function">(<span class="params">&#123; form: &#123; getFieldDecorator &#125; &#125;</span>) =&gt;</span> (</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Form</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;getFieldDecorator(&#x27;username&#x27;, &#123;</span></span><br><span class="line"><span class="xml">        rules: [&#123; required: true &#125;],</span></span><br><span class="line"><span class="xml">      &#125;)(<span class="tag">&lt;<span class="name">Input</span> /&gt;</span>)&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> WrappedDemo = Form.create()(Demo);</span><br></pre></td></tr></table></figure><p>改成：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v4</span></span><br><span class="line"><span class="keyword">const</span> Demo = <span class="function">() =&gt;</span> (</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Form</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Form.Item</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">rules</span>=<span class="string">&#123;[&#123;</span> <span class="attr">required:</span> <span class="attr">true</span> &#125;]&#125;&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>由于移除了 <code>Form.create()</code>，原本的 <code>onFieldsChange</code> 等方法移入 Form 中，通过 <code>fields</code> 对 Form 进行控制。</p><h4 id="表单控制调整"><a href="#表单控制调整" class="headerlink" title="表单控制调整"></a>表单控制调整</h4><p>Form 自带表单控制实体，如需要调用 form 方法，可以通过 <code>Form.useForm()</code> 创建 <strong>Form 实体</strong>进行操作：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v3</span></span><br><span class="line"><span class="keyword">const</span> Demo = <span class="function">(<span class="params">&#123; form: &#123; setFieldsValue &#125; &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  React.useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    setFieldsValue(&#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&#x27;Bamboo&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Form</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;getFieldDecorator(&#x27;username&#x27;, &#123;</span></span><br><span class="line"><span class="xml">          rules: [&#123; required: true &#125;],</span></span><br><span class="line"><span class="xml">        &#125;)(<span class="tag">&lt;<span class="name">Input</span> /&gt;</span>)&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> WrappedDemo = Form.create()(Demo);</span><br></pre></td></tr></table></figure><p>改成：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v4</span></span><br><span class="line"><span class="keyword">const</span> Demo = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [form] = Form.useForm();</span><br><span class="line"></span><br><span class="line">  React.useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    form.setFieldsValue(&#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&#x27;Bamboo&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Form</span> <span class="attr">form</span>=<span class="string">&#123;form&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Form.Item</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">rules</span>=<span class="string">&#123;[&#123;</span> <span class="attr">required:</span> <span class="attr">true</span> &#125;]&#125;&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>对于 class component，也可以通过 <code>ref</code> 获得实体：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v4</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  formRef = React.createRef();</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.formRef.current.setFieldsValue(&#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&#x27;Bamboo&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">Form</span> <span class="attr">ref</span>=<span class="string">&#123;this.formRef&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Form.Item</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">rules</span>=<span class="string">&#123;[&#123;</span> <span class="attr">required:</span> <span class="attr">true</span> &#125;]&#125;&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>由于 Form.Item 内置字段绑定，如果需要不带样式的表单绑定，可以使用 <code>noStyle</code> 属性移除额外样式：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v3</span></span><br><span class="line"><span class="keyword">const</span> Demo = <span class="function">(<span class="params">&#123; form: &#123; getFieldDecorator &#125; &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Form</span>&gt;</span>&#123;getFieldDecorator(&#x27;username&#x27;)(<span class="tag">&lt;<span class="name">Input</span> /&gt;</span>)&#125;<span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> WrappedDemo = Form.create()(Demo);</span><br></pre></td></tr></table></figure><p>改成：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v4</span></span><br><span class="line"><span class="keyword">const</span> Demo = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Form</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Form.Item</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">noStyle</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="字段联动调整"><a href="#字段联动调整" class="headerlink" title="字段联动调整"></a>字段联动调整</h4><p>新版 Form 采用增量更新方式，仅会更新需要更新的字段。因而如果有字段关联更新，或者跟随整个表单更新而更新。可以使用 <code>dependencies</code>或 <code>shouldUpdate</code>。</p><h4 id="onFinish-替代-onSubmit"><a href="#onFinish-替代-onSubmit" class="headerlink" title="onFinish 替代 onSubmit"></a>onFinish 替代 onSubmit</h4><p>对于表单校验，过去版本需要通过监听 <code>onSubmit</code> 事件手工触发 <code>validateFields</code>。新版直接使用 <code>onFinish</code> 事件，该事件仅当校验通过后才会执行：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v3</span></span><br><span class="line"><span class="keyword">const</span> Demo = <span class="function">(<span class="params">&#123; form: &#123; getFieldDecorator, validateFields &#125; &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> onSubmit = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    validateFields(<span class="function">(<span class="params">err, values</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;Received values of form: &#x27;</span>, values);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;onSubmit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;getFieldDecorator(&#x27;username&#x27;, &#123;</span></span><br><span class="line"><span class="xml">          rules: [&#123; required: true &#125;],</span></span><br><span class="line"><span class="xml">        &#125;)(<span class="tag">&lt;<span class="name">Input</span> /&gt;</span>)&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> WrappedDemo = Form.create()(Demo);</span><br></pre></td></tr></table></figure><p>改成：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v4</span></span><br><span class="line"><span class="keyword">const</span> Demo = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> onFinish = <span class="function"><span class="params">values</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Received values of form: &#x27;</span>, values);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Form</span> <span class="attr">onFinish</span>=<span class="string">&#123;onFinish&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Form.Item</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">rules</span>=<span class="string">&#123;[&#123;</span> <span class="attr">required:</span> <span class="attr">true</span> &#125;]&#125;&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="scrollToField-替代-validateFieldsAndScroll"><a href="#scrollToField-替代-validateFieldsAndScroll" class="headerlink" title="scrollToField 替代 validateFieldsAndScroll"></a>scrollToField 替代 validateFieldsAndScroll</h4><p>新版推荐使用 <code>onFinish</code> 进行校验后提交操作，因而 <code>validateFieldsAndScroll</code> 拆成更独立的 <code>scrollToField</code> 方法：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v3</span></span><br><span class="line">onSubmit = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  form.validateFieldsAndScroll(<span class="function">(<span class="params">error, values</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Your logic</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>改成：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v4</span></span><br><span class="line">onFinishFailed = <span class="function">(<span class="params">&#123; errorFields &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  form.scrollToField(errorFields[<span class="number">0</span>].name);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="初始化调整"><a href="#初始化调整" class="headerlink" title="初始化调整"></a>初始化调整</h4><p>此外，我们将 <code>initialValue</code> 从字段中移到 Form 中。以避免同名字段设置 <code>initialValue</code> 的冲突问题：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v3</span></span><br><span class="line"><span class="keyword">const</span> Demo = <span class="function">(<span class="params">&#123; form: &#123; getFieldDecorator &#125; &#125;</span>) =&gt;</span> (</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Form</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;getFieldDecorator(&#x27;username&#x27;, &#123;</span></span><br><span class="line"><span class="xml">        rules: [&#123; required: true &#125;],</span></span><br><span class="line"><span class="xml">        initialValue: &#x27;Bamboo&#x27;,</span></span><br><span class="line"><span class="xml">      &#125;)(<span class="tag">&lt;<span class="name">Input</span> /&gt;</span>)&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> WrappedDemo = Form.create()(Demo);</span><br></pre></td></tr></table></figure><p>改成：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v4</span></span><br><span class="line"><span class="keyword">const</span> Demo = <span class="function">() =&gt;</span> (</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Form</span> <span class="attr">initialValues</span>=<span class="string">&#123;&#123;</span> <span class="attr">username:</span> &#x27;<span class="attr">Bamboo</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Form.Item</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">rules</span>=<span class="string">&#123;[&#123;</span> <span class="attr">required:</span> <span class="attr">true</span> &#125;]&#125;&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>在 v3 版本中，修改未操作的字段 <code>initialValue</code> 会同步更新字段值，这是一个 BUG。但是由于被长期作为一个 feature 使用，因而我们一直没有修复。在 v4 中，该 BUG 已被修复。<code>initialValue</code> 只有在初始化以及重置表单时生效。</p><h4 id="嵌套字段路径使用数组"><a href="#嵌套字段路径使用数组" class="headerlink" title="嵌套字段路径使用数组"></a>嵌套字段路径使用数组</h4><p>过去版本我们通过 <code>.</code> 代表嵌套路径（诸如 <code>user.name</code> 来代表 <code>&#123; user: &#123; name: &#39;&#39; &#125; &#125;</code>）。然而在一些后台系统中，变量名中也会带上 <code>.</code>。这造成用户需要额外的代码进行转化，因而新版中，嵌套路径通过数组来表示以避免错误的处理行为（如 <code>[&#39;user&#39;, &#39;name&#39;]</code>）。</p><p>也因此，诸如 <code>getFieldsError</code> 等方法返回的路径总是数组形式以便于用户处理：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">form.getFieldsError();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[</span></span><br><span class="line"><span class="comment">  &#123; name: [&#x27;user&#x27;, &#x27;name&#x27;], errors: [] &#125;,</span></span><br><span class="line"><span class="comment">  &#123; name: [&#x27;user&#x27;, &#x27;age&#x27;], errors: [&#x27;Some error message&#x27;] &#125;,</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>嵌套字段定义由：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v3</span></span><br><span class="line">&lt;Form.Item label=<span class="string">&quot;Firstname&quot;</span>&gt;&#123;getFieldDecorator(<span class="string">&#x27;user.0.firstname&#x27;</span>, &#123;&#125;)(<span class="xml"><span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span>)&#125;&lt;/Form.Item&gt;</span><br></pre></td></tr></table></figure><p>改至：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v4</span></span><br><span class="line">&lt;Form.Item name=&#123;[<span class="string">&#x27;user&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;firstname&#x27;</span>]&#125; label=<span class="string">&quot;Firstname&quot;</span>&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span></span><br><span class="line">&lt;/Form.Item&gt;</span><br></pre></td></tr></table></figure><p>相似的，<code>setFieldsValue</code> 由：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v3</span></span><br><span class="line"><span class="built_in">this</span>.formRef.current.setFieldsValue(&#123;</span><br><span class="line">  <span class="string">&#x27;user.0.firstname&#x27;</span>: <span class="string">&#x27;John&#x27;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>改至：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v4</span></span><br><span class="line"><span class="built_in">this</span>.formRef.current.setFieldsValue(&#123;</span><br><span class="line">  <span class="attr">user</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">firstname</span>: <span class="string">&#x27;John&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="validateFields-不再支持-callback"><a href="#validateFields-不再支持-callback" class="headerlink" title="validateFields 不再支持 callback"></a>validateFields 不再支持 callback</h4><p><code>validateFields</code> 会返回 Promise 对象，因而你可以通过 <code>async/await</code> 或者 <code>then/catch</code> 来执行对应的错误处理。不再需要判断 <code>errors</code> 是否为空：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v3</span></span><br><span class="line">validateFields(<span class="function">(<span class="params">err, value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">    <span class="comment">// Do something with value</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>改成：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd v4</span></span><br><span class="line">validateFields().then(<span class="function"><span class="params">values</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// Do something with value</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="数据可视化"><a href="#数据可视化" class="headerlink" title="数据可视化"></a>数据可视化</h3><ul><li>echarts echarts-for-react</li><li>bizcharts</li></ul><h2 id="功能实现"><a href="#功能实现" class="headerlink" title="功能实现"></a>功能实现</h2><h3 id="登录数据持久化"><a href="#登录数据持久化" class="headerlink" title="登录数据持久化"></a>登录数据持久化</h3><p>默认使用最高级管理员登录，该管理员名称和密码为默认值，且拥有最高权限。通过向后端发送用户名和密码，后端返回用户信息，其中密码在后端使用<strong>md5</strong>加密格式返回，然后将用户信息保存在内存和localStorage中（store.js），每次打开该网站时就从localStorage中读取数据到内存，实现登录数据持久化。</p><h3 id="输入校验"><a href="#输入校验" class="headerlink" title="输入校验"></a>输入校验</h3><p><strong>正则</strong></p><p><code>/^[a-zA-Z0-9_]+$/</code>用户名必须是英文,数字和下划线组成</p><p><code>/^[a-zA-Z0-9_]+$/.test(value)</code></p><h3 id="跨域和Ajax"><a href="#跨域和Ajax" class="headerlink" title="跨域和Ajax"></a>跨域和Ajax</h3><h3 id="父子通信"><a href="#父子通信" class="headerlink" title="父子通信"></a>父子通信</h3><h4 id="props"><a href="#props" class="headerlink" title="props"></a>props</h4><ul><li><p>【父组件】给【子组件】传递数据：通过<code>props</code>传递</p></li><li><p>【子组件】给【父组件】传递数据：通过<code>props</code>传递，<strong>要求父提前给子传递一个函数</strong></p><p>该项目中将<code>useState</code>的更新函数传给子组件，将数据作为函数参数传回父组件用来更新状态</p></li><li><p>【子组件】给【父组件】传递函数/方法</p><ul><li><code>useRef</code>: 用于获取元素的原生DOM或者获取自定义组件所暴露出来的ref方法(父组件可以通过ref获取子组件，并调用相对应子组件中的方法)</li><li><code>useImperativeHandle</code>:在函数式组件中，用于定义暴露给父组件的ref方法。</li><li><code>React.forwardRef</code>: 将ref父类的ref作为参数传入函数式组件中，本身props只带有children这个参数，这样可以让子类转发父类的ref,当父类把ref挂在到子组件上时，子组件外部通过forwrardRef包裹，可以直接将父组件创建的ref挂在到子组件的某个dom元素上。</li></ul></li></ul><p>权限管理</p><p>仅仅是通过登录用户修改前端页面的展示内容，可以展示的内容在后端的修改不区分用户</p><h2 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h2><p>因为是静态站点，所以完全是客户端部分，那么在使用路由的时候如果不在意美观，尽可能地使用Hash路由，这样跳转会没有任何问题。因为browserRouter依赖于服务端支持，使用它的话访问会出现404 not Found.</p><blockquote><p>由于最开时搭建项目没有考虑发布问题，而且v6版本的’/‘代变绝对路径，输入<a target="_blank" rel="noopener" href="https://lesliewaong.github.io/react-admin-client%E4%BC%9A%E8%87%AA%E5%8A%A8%E8%B7%B3%E8%BD%AC%E8%87%B3https://Lesliewaong.github.io/%EF%BC%8C%E4%BA%8E%E6%98%AF%E4%BD%BF%E7%94%A8HashRouter%E6%9D%A5%E4%BB%A3%E6%9B%BFBrowserRouter%E8%BF%9B%E8%A1%8C%E5%8F%91%E5%B8%83%E3%80%82">https://Lesliewaong.github.io/react-admin-client会自动跳转至https://Lesliewaong.github.io/，于是使用HashRouter来代替BrowserRouter进行发布。</a></p></blockquote><h3 id="BrowserRouter"><a href="#BrowserRouter" class="headerlink" title="BrowserRouter"></a>BrowserRouter</h3><blockquote><p>这一种很自然，比如 <code>/</code> 对应 <code>Home页</code> ，<code>/about</code> 对应 <code>About 页</code>，但是<code>这样的设计需要服务器端渲染</code>，因为<code>用户可能直接访问任何一个 URL，服务器端必须能对 /的访问返回 HTML，也要对 /about的访问返回 HTML</code>。BrowserRouter支持这种URL。</p></blockquote><p>①基于<code>history</code>模式：页面跳转原理是使用了HTML5为浏览器全局的history对象新增了两个API，包括 history.pushState、history.replaceState；和vue router的history模式实现一致<br>②更加优雅： 直接拼接路径；如：<code>www.abc.com/xx</code><br>③<strong>后端需做请求处理</strong>： 切换路由后，请求接口路径会发生变化，后端需要配合，做处理</p><h3 id="HashRouter"><a href="#HashRouter" class="headerlink" title="HashRouter"></a>HashRouter</h3><blockquote><p>这一种看起来不自然，但是实现更简单。</p><p><code>只有一个路径 /，通过 URL 后面的 # 部分来决定路由</code>，<code>/#/</code> 对应 Home 页，<code>/#/about</code> 对应 About 页。</p><p>因为URL中<code>#</code>之后的部分是不会发送给服务器的，所以，<code>无论哪个 URL，最后都是访问服务器的 / 路径，服务器也只需要返回同样一份 HTML</code>就可以，<code>然后由浏览器端解析#后的部分，完成浏览器端渲染</code>。HashRouter支持这种URL。</p></blockquote><p>①<strong>基于hash模式</strong>：页面跳转原理是使用了location.hash、location.replace；和vue router的hash模式实现一致。<br>②<strong>比较丑</strong>：在域名后，先拼接<code>/#</code>，再拼接路径；也就是利用锚点，实现路由的跳转；如：<code>www.abc.com/#/xx</code></p><h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><p><strong>HashRouter</strong>：<strong>项目部署在内网</strong>：如To B的项目、本公司业务人员用的项目等等。</p><p><strong>BrowserRouter</strong>：<strong>项目部署在公网</strong>：如To C的项目、面向大众的项目，url路径美观点当然更好，但后端需要做处理。</p><h3 id="GitHub-Pages发布静态页面"><a href="#GitHub-Pages发布静态页面" class="headerlink" title="GitHub Pages发布静态页面"></a>GitHub Pages发布静态页面</h3><ul><li>利用脚手架创建react 项目</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create-react-app react-admin-client</span><br></pre></td></tr></table></figure><ul><li><p>我们在github上面新建一个远程仓库，名字也叫react-admin-client。记录远程仓库的地址。</p></li><li><p>修改并完善项目，达到你想要的那种程度，疯狂敲代码</p></li><li><p>在package.json配置文件中加一句：</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">“homepage”: “https://Lesliewaong.github.io/react-admin-client” </span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;react-admin-client &#x27;</span>是 项目名称，跟远程仓库名字一样，<span class="string">&#x27;Lesliewaong&#x27;</span>对应你的github用户名</span><br><span class="line">homepage不配置的话或者配置有误，访问链接的时候就会报错404</span><br></pre></td></tr></table></figure><ul><li>开始打包</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br><span class="line">// 打包完成之后会生成一个build文件夹，内面都是静态资源</span><br></pre></td></tr></table></figure><ul><li>之后我们就把项目传到github上面去</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&#x27;一些描述&#x27;</span></span><br><span class="line">git remote add origin https://github.com/xxx(之前我们保存的地址)</span><br><span class="line">// 一般提交代码之前我们都应该先拉下代码，避免冲突</span><br><span class="line">git pull origin master</span><br><span class="line">git push origin master</span><br><span class="line">// 成功之后代码就会提交到master上面去，此时仓库中有相应的代码</span><br></pre></td></tr></table></figure><ul><li>在github展示的是静态的html文件，我们上传的react项目是不能预览的，此时我们可以把打包好的build文件夹上传到另一个分支</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git subtree push --prefix=build origin gh-pages</span><br></pre></td></tr></table></figure><ul><li><p>执行上述操作之后，仓库多了个gh-pages分支</p></li><li><p>进入仓库，点击Setting,找到GitHub Pages这一块，修改Source选择刚刚的gh-pages，然后保存</p></li></ul><p><code>https://Lesliewaong.github.io/react-admin-client</code>就是你项目预览的地址。点击链接就可以预览你的项目啦。</p><h2 id="项目优化"><a href="#项目优化" class="headerlink" title="项目优化"></a>项目优化</h2><h3 id="自定义hook实现搜索防抖"><a href="#自定义hook实现搜索防抖" class="headerlink" title="自定义hook实现搜索防抖"></a>自定义hook实现搜索防抖</h3><p><strong>Input</strong> <code>event.target.value</code> 获取输入值</p><p><strong>useState</strong> 更新此时的搜索状态</p><p>自定义 hook <strong>useDebounce</strong></p><p>使用useEffect时，如果直接将debounce放入包裹防抖函数，由于useEffect的特性导致每次都创建了新的定时器，定时器无法按规定清除，于是借助useEffect自定义useDebounce ，将定时器放入useEffect中，并在return中将定时器清除，React 会在组件卸载的时候执行清除操作。effect 在每次渲染的时候都会执行。React 会在执行当前 effect 之前对上一个effect进行清除。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useDebounce</span>(<span class="params">fn, delay, dep=[]</span>) </span>&#123;</span><br><span class="line">   useEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">let</span> timer; </span><br><span class="line">      timer = <span class="built_in">setTimeout</span>(fn, delay); </span><br><span class="line">      <span class="keyword">return</span> <span class="function">()=&gt;</span>&#123;<span class="built_in">clearTimeout</span>(timer);&#125; <span class="comment">// 这里用到useEffect清除的能力 类似于componentWillUnmount</span></span><br><span class="line">    <span class="comment">// eslint-disable-next-line</span></span><br><span class="line">    &#125;, [...dep]</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useDebounce</span><br></pre></td></tr></table></figure><p>后续可能的改进：</p><p>在 effect 内部去声明它所需要的函数，能容易的看出那个 effect 依赖了组件作用域中的哪些值，更安全。</p><p>其他发现：</p><p>依赖的值可以设置多个，只要有一个更新，就会执行effect。</p><p>useEffect(() =&gt; updateStatus(productStatus), [productStatus,productId])</p><h1 id="day01"><a href="#day01" class="headerlink" title="day01"></a>day01</h1><h2 id="1-项目开发准备"><a href="#1-项目开发准备" class="headerlink" title="1. 项目开发准备"></a>1. 项目开发准备</h2><pre><code>1). 描述项目
2). 技术选型 
3). API接口/接口文档/测试接口
</code></pre><h2 id="2-启动项目开发"><a href="#2-启动项目开发" class="headerlink" title="2. 启动项目开发"></a>2. 启动项目开发</h2><pre><code>1). 使用react脚手架创建项目
2). 开发环境运行: npm start
3). 生产环境打包运行: npm run build   serve build
</code></pre><h2 id="3-git管理项目"><a href="#3-git管理项目" class="headerlink" title="3. git管理项目"></a>3. git管理项目</h2><pre><code>1). 创建远程仓库
2). 创建本地仓库
    a. 配置.gitignore
    b. git init
    c. git add .
    d. git commit -m &quot;init&quot;
3). 将本地仓库推送到远程仓库
    git remote add origin url
    git push origin master
4). 在本地创建dev分支, 并推送到远程
    git checkout -b dev
    git push origin dev
5). 如果本地有修改
    git add .
    git commit -m &quot;xxx&quot;
    git push origin dev
6). 新的同事: 克隆仓库
    git clone url
    git checkout -b dev origin/dev
    git pull origin dev
7). 如果远程修改
    git pull origin dev
</code></pre><h2 id="4-创建项目的基本结构"><a href="#4-创建项目的基本结构" class="headerlink" title="4. 创建项目的基本结构"></a>4. 创建项目的基本结构</h2><pre><code>api: ajax请求的模块
components: 非路由组件
pages: 路由组件
App.js: 应用的根组件
index.js: 入口js
</code></pre><h2 id="5-引入antd"><a href="#5-引入antd" class="headerlink" title="5 引入antd"></a>5 引入antd</h2><pre><code>下载antd的包
按需打包: 只打包import引入组件的js/css
    下载工具包
    config-overrides.js
    package.json
自定义主题
    下载工具包
    config-overrides.js
使用antd的组件
    根据antd的文档编写
</code></pre><h2 id="6-引入路由"><a href="#6-引入路由" class="headerlink" title="6. 引入路由"></a>6. 引入路由</h2><pre><code>下载包: react-router-dom
拆分应用路由:
  Login: 登陆
  Admin: 后台管理界面
注册路由:
  &lt;BrowserRouter&gt;
  &lt;Switch&gt;
  &lt;Route path=&#39;&#39; component=&#123;&#125;/&gt;
</code></pre><h2 id="7-Login的静态组件"><a href="#7-Login的静态组件" class="headerlink" title="7. Login的静态组件"></a>7. Login的静态组件</h2><pre><code>1). 自定义了一部分样式布局
2). 使用antd的组件实现登陆表单界面
  Form  / Form.Item
  Input
  Icon
  Button
</code></pre><h2 id="8-收集表单数据和表单的前台验证"><a href="#8-收集表单数据和表单的前台验证" class="headerlink" title="8. 收集表单数据和表单的前台验证"></a>8. 收集表单数据和表单的前台验证</h2><pre><code>1). form对象
    如何让包含&lt;Form&gt;的组件得到form对象?  WrapLoginForm = Form.create()(LoginForm)
    WrapLoginForm是LoginForm的父组件, 它给LoginForm传入form属性
    用到了高阶函数和高阶组件的技术
2). 操作表单数据
    form.getFieldDecorator(&#39;标识名称&#39;, &#123;initialValue: 初始值, rules: []&#125;)(&lt;Input/&gt;)包装表单项组件标签
    form.getFieldsValue(): 得到包含所有输入数据的对象
    form.getFieldValue(id): 根据标识得到对应字段输入的数据

3). 前台表单验证
    a. 声明式实时表单验证:
        form.getFieldDecorator(&#39;标识名称&#39;, &#123;rules: [&#123;min: 4, message: &#39;错误提示信息&#39;&#125;]&#125;)(&lt;Input/&gt;)
    b. 自定义表单验证
        form.getFieldDecorator(&#39;标识名称&#39;, &#123;rules: [&#123;validator: this.validatePwd&#125;]&#125;)(&lt;Input/&gt;)
        validatePwd = (rule, value, callback) =&gt; &#123;
          if(有问题) callback(&#39;错误提示信息&#39;) else callack()
        &#125; 
    c. 点击提示时统一验证
        form.validateFields((error, values) =&gt; &#123;
          if(!error) &#123;通过了验证, 发送ajax请求&#125;
        &#125;)
</code></pre><h2 id="9-高阶函数与高阶组件"><a href="#9-高阶函数与高阶组件" class="headerlink" title="9. 高阶函数与高阶组件"></a>9. 高阶函数与高阶组件</h2><pre><code>1. 高阶函数
    1). 一类特别的函数
        a. 接受函数类型的参数
        b. 返回值是函数
    2). 常见
        a. 定时器: setTimeout()/setInterval()
        b. Promise: Promise(() =&gt; &#123;&#125;) then(value =&gt; &#123;&#125;, reason =&gt; &#123;&#125;)
        c. 数组遍历相关的方法: forEach()/filter()/map()/reduce()/find()/findIndex()
        d. 函数对象的bind()
        e. Form.create()() / getFieldDecorator()()
    3). 高阶函数更新动态, 更加具有扩展性

2. 高阶组件
    1). 本质就是一个函数
    2). 接收一个组件(被包装组件), 返回一个新的组件(包装组件), 包装组件会向被包装组件传入特定属性
    3). 作用: 扩展组件的功能
    
3. 高阶组件与高阶函数的关系
    高阶组件是特别的高阶函数
    接收一个组件函数, 返回是一个新的组件函数
</code></pre><h1 id="day02"><a href="#day02" class="headerlink" title="day02"></a>day02</h1><h2 id="1-后台应用"><a href="#1-后台应用" class="headerlink" title="1. 后台应用"></a>1. 后台应用</h2><pre><code>启动后台应用: mongodb服务必须启动
使用postman测试接口(根据接口文档):
    访问测试: post请求的参数在body中设置
    保存测试接口
    导出/导入所有测试接口
</code></pre><h2 id="2-编写ajax代码"><a href="#2-编写ajax代码" class="headerlink" title="2. 编写ajax代码"></a>2. 编写ajax代码</h2><pre><code>1). ajax请求函数模块: api/ajax.js
    封装axios + Promise
    函数的返回值是promise对象  ===&gt; 后面用上async/await
    自己创建Promise
      1. 内部统一处理请求异常: 外部的调用都不用使用try..catch来处理请求异常
      2. 异步返回是响应数据(而不是响应对象): 外部的调用异步得到的就直接是数据了(response --&gt; response.data)
2). 接口请求函数模块: api/index.js
    根据接口文档编写(一定要具备这个能力)
    接口请求函数: 使用ajax(), 返回值promise对象
3). 解决ajax跨域请求问题(开发时)
    办法: 配置代理  ==&gt; 只能解决开发环境
    编码: package.json: proxy: &quot;http://localhost:5000&quot;
4). 对代理的理解
    1). 是什么?
        具有特定功能的程序
    2). 运行在哪?
        前台应用端
        只能在开发时使用
    3). 作用?
        解决开发时的ajax请求跨域问题
        a. 监视并拦截请求(3000)
        b. 转发请求(4000)
    4). 配置代理
        告诉代理服务器一些信息: 比如转发的目标地址
        开发环境: 前端工程师
        生产环境: 后端工程师
5). async和await
    a. 作用?
       简化promise对象的使用: 不用再使用then()来指定成功/失败的回调函数
       以同步编码(没有回调函数了)方式实现异步流程
    b. 哪里写await?
        在返回promise的表达式左侧写await: 不想要promise, 想要promise异步执行的成功的value数据
    c. 哪里写async?
        await所在函数(最近的)定义的左侧写async
</code></pre><h2 id="3-实现登陆-包含自动登陆"><a href="#3-实现登陆-包含自动登陆" class="headerlink" title="3. 实现登陆(包含自动登陆)"></a>3. 实现登陆(包含自动登陆)</h2><pre><code>login.jsx
    1). 调用登陆的接口请求
    2). 如果失败, 显示错误提示信息
    3). 如果成功了:
        保存user到local/内存中
        跳转到admin
    4). 如果内存中的user有值, 自动跳转到admin
src/index.js
    读取local中user到内存中保存
admin.jsx
    判断如果内存中没有user(_id没有值), 自动跳转到login
storageUtils.js
    包含使用localStorage来保存user相关操作的工具模块
    使用第三库store
        简化编码
        兼容不同的浏览器
memoryUtils.js
    用来在内存中保存数据(user)的工具类
</code></pre><h2 id="4-搭建admin的整体界面结构"><a href="#4-搭建admin的整体界面结构" class="headerlink" title="4. 搭建admin的整体界面结构"></a>4. 搭建admin的整体界面结构</h2><pre><code>1). 整体布局使用antd的Layout组件
2). 拆分组件
    LeftNav: 左侧导航
    Header: 右侧头部
3). 子路由
    定义路由组件
    注册路由
</code></pre><h2 id="5-LeftNav组件"><a href="#5-LeftNav组件" class="headerlink" title="5. LeftNav组件"></a>5. LeftNav组件</h2><pre><code>1). 使用antd的组件
    Menu / Item / SubMenu

2). 使用react-router
    withRouter(): 包装非路由组件, 给其传入history/location/match属性
    history: push()/replace()/goBack()
    location: pathname属性
    match: params属性

3). componentWillMount与componentDidMount的比较
    componentWillMount: 在第一次render()前调用一次, 为第一次render()准备数据(同步)
    componentDidMount: 在第一次render()之后调用一次, 启动异步任务, 后面异步更新状态重新render

4). 根据动态生成Item和SubMenu的数组
    map() + 递归: 多级菜单列表
    reduce() + 递归: 多级菜单列表

5). 2个问题?
    刷新时如何选中对应的菜单项?
        selectedKey是当前请求的path
    刷新子菜单路径时, 自动打开子菜单列表?
        openKey是 一级列表项的某个子菜单项是当前对应的菜单项
</code></pre><h1 id="day03"><a href="#day03" class="headerlink" title="day03"></a>day03</h1><h2 id="1-Header组件"><a href="#1-Header组件" class="headerlink" title="1. Header组件"></a>1. Header组件</h2><pre><code>1). 界面静态布局
    三角形效果
2). 获取登陆用户的名称显示
    MemoryUtils
3). 当前时间
    循环定时器, 每隔1s更新当前时间状态
    格式化指定时间: dateUtils
4). 天气预报
    使用jsonp库发jsonp请求百度天气预报接口
    对jsonp请求的理解
5). 当前导航项的标题
    得到当前请求的路由path: withRouter()包装非路由组件
    根据path在menuList中遍历查找对应的item的title
6). 退出登陆
    Modal组件显示提示
    清除保存的user
    跳转到login
7). 抽取通用的类链接按钮组件
    通过...透传所有接收的属性: &lt;Button &#123;...props&#125; /&gt;    &lt;LinkButton&gt;xxxx&lt;/LinkButton&gt;
    组件标签的所有子节点都会成为组件的children属性
</code></pre><h2 id="2-jsonp解决ajax跨域的原理"><a href="#2-jsonp解决ajax跨域的原理" class="headerlink" title="2. jsonp解决ajax跨域的原理"></a>2. jsonp解决ajax跨域的原理</h2><pre><code>1). jsonp只能解决GET类型的ajax请求跨域问题
2). jsonp请求不是ajax请求, 而是一般的get请求
3). 基本原理
    浏览器端:
        动态生成&lt;script&gt;来请求后台接口(src就是接口的url)
        定义好用于接收响应数据的函数(fn), 并将函数名通过请求参数提交给后台(如: callback=fn)
    服务器端:
        接收到请求处理产生结果数据后, 返回一个函数调用的js代码, 并将结果数据作为实参传入函数调用
    浏览器端:
        收到响应自动执行函数调用的js代码, 也就执行了提前定义好的回调函数, 并得到了需要的结果数据
</code></pre><h1 id="day04-Category组件"><a href="#day04-Category组件" class="headerlink" title="day04: Category组件"></a>day04: Category组件</h1><h2 id="1-使用antd组件构建分类列表界面"><a href="#1-使用antd组件构建分类列表界面" class="headerlink" title="1. 使用antd组件构建分类列表界面"></a>1. 使用antd组件构建分类列表界面</h2><pre><code>Card
Table
Button
Icon
</code></pre><h2 id="2-相关接口请求函数"><a href="#2-相关接口请求函数" class="headerlink" title="2. 相关接口请求函数"></a>2. 相关接口请求函数</h2><pre><code>获取一级/二级分类列表
添加分类
更新分类
</code></pre><h2 id="3-异步显示一级分类列表"><a href="#3-异步显示一级分类列表" class="headerlink" title="3. 异步显示一级分类列表"></a>3. 异步显示一级分类列表</h2><pre><code>设计一级分类列表的状态: categorys
异步获取一级分类列表: componentDidMount()&#123;&#125;
更新状态, 显示
</code></pre><h2 id="4-显示二级分类列表"><a href="#4-显示二级分类列表" class="headerlink" title="4. 显示二级分类列表"></a>4. 显示二级分类列表</h2><pre><code>设计状态: subCategorys / parentId / parentName
显示二级分类列表: 根据parentId状态值, 异步获取分类列表
setState()的问题
    setState()更新状态是异步更新的, 直接读取状态值还是旧的状态值
    setState(&#123;&#125;, [callback]), 回调函数是在状态更新且界面更新之后执行, 可以在此获取最新的状态
</code></pre><h2 id="5-更新分类"><a href="#5-更新分类" class="headerlink" title="5. 更新分类"></a>5. 更新分类</h2><pre><code>1). 界面
    antd组件: Modal, Form, Input
    显示/隐藏: showStatus状态为2/0
    
2). 功能
    父组(Category)件得到子组件(AddForm)的数据(form)
    调用更新分类的接口
    重新获取分类列表
</code></pre><p>​</p><h1 id="day05"><a href="#day05" class="headerlink" title="day05"></a>day05</h1><h2 id="1-添加分类"><a href="#1-添加分类" class="headerlink" title="1. 添加分类"></a>1. 添加分类</h2><pre><code>1). 界面
    antd组件: Modal, Form, Select, Input
    显示/隐藏: showStatus状态为1/0
    
2). 功能
    父组(Category)件得到子组件(AddForm)的数据(form)
    调用添加分类的接口
    重新获取分类列表
</code></pre><h2 id="2-Product整体路由"><a href="#2-Product整体路由" class="headerlink" title="2. Product整体路由"></a>2. Product整体路由</h2><pre><code>1). 配置子路由: 
    ProductHome / ProductDetail / ProductAddUpdate
    &lt;Route&gt; / &lt;Switch&gt; / &lt;Redirect&gt;

2). 匹配路由的逻辑:
    默认: 逐层匹配   &lt;Route path=&#39;/product&#39; component=&#123;ProductHome&#125;/&gt;
    exact属性: 完全匹配
</code></pre><h2 id="3-分页实现技术-2种"><a href="#3-分页实现技术-2种" class="headerlink" title="3. 分页实现技术(2种)"></a>3. 分页实现技术(2种)</h2><pre><code>1). 前台分页
    请求获取数据: 一次获取所有数据, 翻页时不需要再发请求
    请求接口: 
        不需要指定请求参数: 页码(pageNum)和每页数量(pageSize)
        响应数据: 所有数据的数组

2). 基于后台的分页
    请求获取数据: 每次只获取当前页的数据, 翻页时要发请求
    请求接口: 
        需要指定请求参数: 页码(pageNum)和每页数量(pageSize)
        响应数据: 当前页数据的数组 + 总记录数(total)

3). 如何选择?
    基本根据数据多少来选择
</code></pre><h2 id="4-ProductHome组件"><a href="#4-ProductHome组件" class="headerlink" title="4. ProductHome组件"></a>4. ProductHome组件</h2><pre><code>1). 分页显示
   界面: &lt;Card&gt; / &lt;Table&gt; / Select / Icon / Input / Button
   状态: products / total
   接口请求函数需要的数据: pageNum, pageSize
   异步获取第一页数据显示
       调用分页的接口请求函数, 获取到当前页的products和总记录数total
       更新状态: products / total
   翻页:
       绑定翻页的监听, 监听回调需要得到pageNum
       异步获取指定页码的数据显示  
 
2). 搜索分页
   接口请求函数需要的数据: 
       pageSize: 每页的条目数
       pageNum: 当前请求第几页 (从1开始)
       productDesc / productName: searchName 根据商品描述/名称搜索
   状态:  searchType / searchName  / 在用户操作时实时收集数据
   异步搜索显示分页列表
       如果searchName有值, 调用搜索的接口请求函数获取数据并更新状态
       
3). 更新商品的状态
   初始显示: 根据product的status属性来显示  status = 1/2
   点击切换:
       绑定点击监听
       异步请求更新状态

4). 进入详情界面
   history.push(&#39;/product/detail&#39;, &#123;product&#125;)

5). 进入添加界面
    history.push(&#39;/product/addupdate&#39;)
</code></pre><h2 id="5-ProductDetail组件"><a href="#5-ProductDetail组件" class="headerlink" title="5. ProductDetail组件"></a>5. ProductDetail组件</h2><pre><code>1). 读取商品数据: this.props.location.state.product
2). 显示商品信息: &lt;Card&gt; / List 
3). 异步显示商品所属分类的名称
    pCategoryId==0 : 异步获取categoryId的分类名称
    pCategoryId!=0: 异步获取 pCategoryId/categoryId的分类名称
4). Promise.all([promise1, promise2])
    返回值是promise
    异步得到的是所有promsie的结果的数组
    特点: 一次发多个请求, 只有当所有请求都成功, 才成功, 并得到成功的数据,一旦有一个失败, 整个都失败
</code></pre><h1 id="day06"><a href="#day06" class="headerlink" title="day06"></a>day06</h1><h2 id="1-ProductAddUpdate"><a href="#1-ProductAddUpdate" class="headerlink" title="1. ProductAddUpdate"></a>1. ProductAddUpdate</h2><pre><code>1). 基本界面
    Card / Form / Input / TextArea / Button
    FormItem的label标题和layout
    
2). 分类的级联列表
    Cascader的基本使用
    异步获取一级分类列表, 生成一级分类options
    如果当前是更新二级分类的商品, 异步获取对应的二级分类列表, 生成二级分类options, 并添加为对应option的children
    async函数返回值是一个新promise对象, promise的结果和值由async函数的结果决定
    当选择某个一级分类项时, 异步获取对应的二级分类列表, 生成二级分类options, 并添加为当前option的children

3). 表单数据收集与表单验证
</code></pre><h2 id="2-PicturesWall"><a href="#2-PicturesWall" class="headerlink" title="2. PicturesWall"></a>2. PicturesWall</h2><pre><code>1). antd组件
    Upload / Modal / Icon
    根据示例DEMO改造编写
2). 上传图片
    在&lt;Upload&gt;上配置接口的path和请求参数名
    监视文件状态的改变: 上传中 / 上传完成/ 删除
    在上传成功时, 保存好相关信息: name / url
    为父组件提供获取已上传图片文件名数组的方法
3). 删除图片
    当文件状态变为删除时, 调用删除图片的接口删除上传到后台的图片
4). 父组件调用子组件对象的方法: 使用ref技术
    1. 创建ref容器: thi.pw = React.createRef()
    2. 将ref容器交给需要获取的标签元素: &lt;PicturesWall ref=&#123;this.pw&#125; /&gt;  // 自动将将标签对象添加为pw对象的current属性
    3. 通过ref容器读取标签元素: this.pw.current
</code></pre><h1 id="day07"><a href="#day07" class="headerlink" title="day07"></a>day07</h1><h2 id="1-RichTextEditor"><a href="#1-RichTextEditor" class="headerlink" title="1. RichTextEditor"></a>1. RichTextEditor</h2><pre><code>1). 使用基于react的富文本编程器插件库: react-draft-wysiwyg
2). 参考库的DEMO和API文档编写
3). 如果还有不确定的, 百度搜索, 指定相对准确的关键字
</code></pre><h2 id="2-完成商品添加与修改功能"><a href="#2-完成商品添加与修改功能" class="headerlink" title="2. 完成商品添加与修改功能"></a>2. 完成商品添加与修改功能</h2><pre><code>1). 收集输入数据
    通过form收集: name/desc/price/pCategoryId/categoryId
    通过ref收集: imgs/detail
    如果是更新收集: _id
    将收集数据封装成product对象
2). 更新商品
    定义添加和更新的接口请求函数
    调用接口请求函数, 如果成功并返回商品列表界面
</code></pre><h2 id="3-角色管理"><a href="#3-角色管理" class="headerlink" title="3. 角色管理"></a>3. 角色管理</h2><pre><code>1). 角色前台分页显示
2). 添加角色
3). 给指定角色授权
    界面: Tree
    状态: checkedKeys, 根据传入的role的menus进行初始化
    勾选某个Node时, 更新checkedKeys
    点击OK时: 通过ref读取到子组件中的checkedKeys作为要更新product新的menus
            发请求更新product
    解决默认勾选不正常的bug: 利用组件的componentWillReceiveProps()
</code></pre><h1 id="day08"><a href="#day08" class="headerlink" title="day08"></a>day08</h1><h2 id="1-setState-的使用"><a href="#1-setState-的使用" class="headerlink" title="1. setState()的使用"></a>1. setState()的使用</h2><pre><code>1). setState(updater, [callback]),
    updater为返回stateChange对象的函数: (state, props) =&gt; stateChange
    接收的state和props被保证为最新的
2). setState(stateChange, [callback])
    stateChange为对象,
    callback是可选的回调函数, 在状态更新且界面更新后才执行
3). 总结:
    对象方式是函数方式的简写方式
        如果新状态不依赖于原状态 ===&gt; 使用对象方式
        如果新状态依赖于原状态 ===&gt; 使用函数方式
    如果需要在setState()后获取最新的状态数据, 在第二个callback函数中读取
</code></pre><h2 id="2-setState-的异步与同步"><a href="#2-setState-的异步与同步" class="headerlink" title="2. setState()的异步与同步"></a>2. setState()的异步与同步</h2><pre><code>1). setState()更新状态是异步还是同步的?
    a. 执行setState()的位置?
        在react控制的回调函数中: 生命周期勾子 / react事件监听回调
        非react控制的异步回调函数中: 定时器回调 / 原生事件监听回调 / promise回调 /...
    b. 异步 OR 同步?
        react相关回调中: 异步
        其它异步回调中: 同步

2). 关于异步的setState()
    a. 多次调用, 如何处理?
        setState(&#123;&#125;): 合并更新一次状态, 只调用一次render()更新界面 ---状态更新和界面更新都合并了
        setState(fn): 更新多次状态, 但只调用一次render()更新界面  ---状态更新没有合并, 但界面更新合并了
    b. 如何得到异步更新后的状态数据?
        在setState()的callback回调函数中
</code></pre><h2 id="3-Component与PureComponent"><a href="#3-Component与PureComponent" class="headerlink" title="3. Component与PureComponent"></a>3. Component与PureComponent</h2><pre><code>1). Component存在的问题?
    a. 父组件重新render(), 当前组件也会重新执行render(), 即使没有任何变化
    b. 当前组件setState(), 重新执行render(), 即使state没有任何变化
  
2). 解决Component存在的问题
    a. 原因: 组件的shouldcomponentUpdate()默认返回true, 即使数据没有变化render()都会重新执行
    b. 办法1: 重写shouldComponentUpdate(), 判断如果数据有变化返回true, 否则返回false
    c. 办法2: 使用PureComponent代替Component
    d. 说明: 一般都使用PureComponent来优化组件性能
  
3). PureComponent的基本原理
    a. 重写实现shouldComponentUpdate()
    b. 对组件的新/旧state和props中的数据进行浅比较, 如果都没有变化, 返回false, 否则返回true
    c. 一旦componentShouldUpdate()返回false不再执行用于更新的render()
  
4). 面试题:
    组件的哪个生命周期勾子能实现组件优化?
    PureComponent的原理?
    区别Component与PureComponent?
</code></pre><h2 id="4-用户管理"><a href="#4-用户管理" class="headerlink" title="4. 用户管理"></a>4. 用户管理</h2><pre><code>1). 显示用户分页列表
2). 添加用户
3). 修改用户
4). 删除用户
</code></pre><h2 id="5-导航菜单权限控制"><a href="#5-导航菜单权限控制" class="headerlink" title="5. 导航菜单权限控制"></a>5. 导航菜单权限控制</h2><pre><code>1). 基本思路(依赖于后台): 
    角色: 包含所拥有权限的所有菜单项key的数组: menus=[key1, key2, key3]
    用户: 包含所属角色的ID: role_id
    当前登陆用户: user中已经包含了所属role对象
    遍历显示菜单项时: 判断只有当有对应的权限才显示
2). 判断是否有权限的条件?
    a. 如果当前用户是admin
    b. 如果当前item是公开的
    c. 当前用户有此item的权限: key有没有menus中
    d. 如果当前用户有此item的某个子item的权限
</code></pre><h1 id="day09"><a href="#day09" class="headerlink" title="day09"></a>day09</h1><h2 id="1-redux理解"><a href="#1-redux理解" class="headerlink" title="1. redux理解"></a>1. redux理解</h2><pre><code>什么?: redux是专门做状态管理的独立第3方库, 不是react插件, 但一般都用在react项目中
作用?: 对应用中状态进行集中式的管理(写/读)
开发: 与react-redux, redux-thunk等插件配合使用
</code></pre><h2 id="2-redux相关API"><a href="#2-redux相关API" class="headerlink" title="2. redux相关API"></a>2. redux相关API</h2><pre><code>redux中包含: createStore(), applyMiddleware(), combineReducers()
store对象: getState(), dispatch(), subscribe()
react-redux: 
    &lt;Provider store=&#123;store&#125;&gt;: 向所有的容器组件提供store
    connect(
        state =&gt; (&#123;xxx: state.xxx&#125;),
        &#123;actionCreator1, actionCreator2&#125;
    )(UI组件): 
        产生的就是容器组件, 负责向UI组件传递标签属性, 
        一般属性值从state中获取, 函数属性内部会执行dispatch分发action
</code></pre><h2 id="3-redux核心概念-3个"><a href="#3-redux核心概念-3个" class="headerlink" title="3. redux核心概念(3个)"></a>3. redux核心概念(3个)</h2><pre><code>action: 
    默认是对象(同步action), &#123;type: &#39;xxx&#39;, data: value&#125;, 需要通过对应的actionCreator产生, 
    它的值也可以是函数(异步action), 需要引入redux-thunk才可以
reducer
    根据老的state和指定的action, 返回一个新的state
    不能修改老的state
store
    redux最核心的管理对象
    内部管理着: state和reducer
    提供方法: getState(), dispatch(action), subscribe(listener)
</code></pre><h2 id="4-redux工作流程"><a href="#4-redux工作流程" class="headerlink" title="4. redux工作流程"></a>4. redux工作流程</h2><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://www.ruanyifeng.com/blogimg/asset/2016/bg2016091802.jpg"></p><h2 id="5-使用redux及相关库编码"><a href="#5-使用redux及相关库编码" class="headerlink" title="5. 使用redux及相关库编码"></a>5. 使用redux及相关库编码</h2><pre><code>需要引入的库: 
    redux
    react-redux
    redux-thunk
    redux-devtools-extension(这个只在开发时需要)
redux文件夹: 
    action-types.js
    actions.js
    reducers.js
    store.js
组件分2类: 
    ui组件(components): 不使用redux相关API
    容器组件(containers): 通过connect()()生成的组件
</code></pre><h1 id="day10"><a href="#day10" class="headerlink" title="day10"></a>day10</h1><h2 id="1-在项目中搭建redux整套环境"><a href="#1-在项目中搭建redux整套环境" class="headerlink" title="1. 在项目中搭建redux整套环境"></a>1. 在项目中搭建redux整套环境</h2><pre><code>1). store.js
2). reducer.js
3). actions.js
4). action-types.js
5). index.js
6). 在需要与redux进行状态数据通信(读/写)的UI组件包装生成容器组件
</code></pre><h2 id="2-通过redux管理头部标题headTitle数据"><a href="#2-通过redux管理头部标题headTitle数据" class="headerlink" title="2. 通过redux管理头部标题headTitle数据"></a>2. 通过redux管理头部标题headTitle数据</h2><pre><code>1). action-types.js
2). actoins.js
3). reducer.js
4). 相关组件: 
    left-nav.js
    header.js
</code></pre><h2 id="3-通过redux管理登陆用户信息user数据"><a href="#3-通过redux管理登陆用户信息user数据" class="headerlink" title="3. 通过redux管理登陆用户信息user数据"></a>3. 通过redux管理登陆用户信息user数据</h2><pre><code>1). action-types.js
2). actoin.js
3). reducer.js
4). 相关组件: 
    login.js
    admin.js
    left-nav.js
    header.js
    role.js
</code></pre><h2 id="4-自定义redux库"><a href="#4-自定义redux库" class="headerlink" title="4. 自定义redux库"></a>4. 自定义redux库</h2><pre><code>1). redux库向外暴露下面几个函数
    createStore(): 接收的参数为reducer函数, 返回为store对象
    combineReducers(): 接收包含n个reducer方法的对象, 返回一个新的reducer函数
    applyMiddleware() // 暂不实现

2). store对象的内部结构
    getState(): 返回值为内部保存的state数据
    dispatch(): 参数为action对象
    subscribe(): 参数为监听内部state更新的回调函数

3). combineReducers函数:
    返回的总reducer函数内部会根据总的state和指定的action, 
    调用每个reducer函数得到对应的新的state, 并封装成一个新的总state对象返回
</code></pre><h2 id="5-自定义react-redux库"><a href="#5-自定义react-redux库" class="headerlink" title="5. 自定义react-redux库"></a>5. 自定义react-redux库</h2><pre><code>1). react-redux向外暴露了2个API
    a. Provider组件类
    b. connect函数

2). Provider组件
    接收store属性
    通过context将store暴露给所有的容器子组件
    Provider原样渲染其所有标签子节点
    
3). connect函数
    接收2个参数: mapStateToProps和mapDispatchToProps
    connect()执行的返回值为一个高阶组件: 包装UI组件, 返回一个新的容器组件
    mapStateToProps: 
        为一个函数, 返回包含n个一般属性对象, 
        容器组件中调用得到对象后, 初始化为容器组件的初始状态, 并指定为UI组件标签的一般属性
    mapDispatchToProps:
        如果为函数, 调用得到包含n个dispatch方法的对象
        如果为对象, 遍历封装成包含n个dispatch方法的对象
        将包含n个dispatch方法的对象分别作为函数属性传入UI组件
    通过store绑定state变化的监听, 在回调函数中根据store中最新的state数据更新容器组件状态, 从而更新UI组件
</code></pre><h1 id="day11"><a href="#day11" class="headerlink" title="day11"></a>day11</h1><h2 id="1-数据可视化"><a href="#1-数据可视化" class="headerlink" title="1. 数据可视化"></a>1. 数据可视化</h2><pre><code>1). echarts(百度) ==&gt; echarts-for-react
2). g2(阿里) ==&gt; bizCharts
3). d3(国外)
</code></pre><h2 id="2-前台404界面"><a href="#2-前台404界面" class="headerlink" title="2. 前台404界面"></a>2. 前台404界面</h2><pre><code>&lt;Redirect from=&#39;/&#39; to=&#39;/home&#39; exact/&gt;
&lt;Route component=&#123;NotFound&#125;/&gt;
</code></pre><h2 id="3-打包应用运行"><a href="#3-打包应用运行" class="headerlink" title="3. 打包应用运行"></a>3. 打包应用运行</h2><pre><code>1). 解决生产环境ajax跨域问题
    使用nginx的反向代理解决(一般由后台配置)
    CORS: 允许浏览器端跨域
2). BrowserRouter模式刷新404的问题
    a. 问题: 刷新某个路由路径时, 会出现404的错误
    b. 原因: 项目根路径后的path路径会被当作后台路由路径, 去请求对应的后台路由, 但没有
    c. 解决: 使用自定义中间件去读取返回index页面展现
</code></pre></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Leslie Waong</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://lesliewaong.top/posts/3bed2a1e.html">https://lesliewaong.top/posts/3bed2a1e.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://lesliewaong.top" target="_blank">Leslie Waong</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/React/">React</a><a class="post-meta__tags" href="/tags/%E5%85%A8%E6%A0%88%E5%90%8E%E5%8F%B0/">全栈后台</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/8.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/wx.png" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/wx.png" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/zfb.png" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/zfb.png" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/e0b9585d.html"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/13.webp" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">React生命周期</div></div></a></div><div class="next-post pull-right"><a href="/posts/7f1a535a.html"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/7.webp" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">React相关问题</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/46aec6b.html" title="Hook"><img class="cover" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/14.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-02</div><div class="title">Hook</div></div></a></div><div><a href="/posts/e0d98019.html" title="React基础"><img class="cover" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/4.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-02</div><div class="title">React基础</div></div></a></div><div><a href="/posts/a66a21e1.html" title="React Router 5"><img class="cover" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/13.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-03</div><div class="title">React Router 5</div></div></a></div><div><a href="/posts/3f63705b.html" title="React Router 6"><img class="cover" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/5.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-02</div><div class="title">React Router 6</div></div></a></div><div><a href="/posts/e0b9585d.html" title="React生命周期"><img class="cover" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/13.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-02</div><div class="title">React生命周期</div></div></a></div><div><a href="/posts/7f1a535a.html" title="React相关问题"><img class="cover" src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/7.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-01</div><div class="title">React相关问题</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/avatar.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">Leslie Waong</div><div class="author-info__description">BUPT</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">68</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">122</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">20</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Lesliewaong"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Lesliewaong" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=1138964397&amp;website=www.qtxml.cn" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">红雨漂泊泛起了回忆怎么潜</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#React%E5%AE%9E%E6%88%98%E5%85%A8%E6%A0%88%E5%90%8E%E5%8F%B0"><span class="toc-text">React实战全栈后台</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87"><span class="toc-text">准备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%8F%8F%E8%BF%B0"><span class="toc-text">项目描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B"><span class="toc-text">技术选型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-text">项目结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1"><span class="toc-text">前端路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3"><span class="toc-text">接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#npm-yarn-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">npm&#x2F;yarn 常用命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#git-%E5%B8%B8%E7%94%A8%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="toc-text">git 常用基本命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E8%AF%A6%E8%A7%A3"><span class="toc-text">应用开发详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%90%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91"><span class="toc-text">开启项目开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#git%E7%AE%A1%E7%90%86%E9%A1%B9%E7%9B%AE"><span class="toc-text">git管理项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E5%9F%BA%E6%9C%AC%E7%9B%AE%E5%BD%95%E8%AE%BE%E8%AE%A1"><span class="toc-text">项目源码基本目录设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5antd"><span class="toc-text">引入antd</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85"><span class="toc-text">下载安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#package-json-%E4%B8%AD%E4%BF%AE%E6%94%B9%E5%B1%9E%E6%80%A7"><span class="toc-text">package.json 中修改属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E7%9B%AE%E5%BD%95%E5%88%9B%E5%BB%BA-craco-config-js-%E6%96%87%E4%BB%B6"><span class="toc-text">根目录创建 craco.config.js 文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5-less-%E6%96%87%E4%BB%B6"><span class="toc-text">引入 less 文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%90%E4%B8%AA%E7%BB%84%E4%BB%B6%E4%B8%AD%E4%BD%BF%E7%94%A8antd%E7%BB%84%E4%BB%B6"><span class="toc-text">某个组件中使用antd组件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E8%B7%AF%E7%94%B1"><span class="toc-text">引入路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Login%E7%BB%84%E4%BB%B6-%E4%B8%8D%E4%B8%8E%E5%90%8E%E5%8F%B0%E4%BA%A4%E4%BA%92"><span class="toc-text">Login组件(不与后台交互)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8Cserver-%E7%AB%AF%E9%A1%B9%E7%9B%AE"><span class="toc-text">运行server 端项目</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E5%90%8E%E5%8F%B0%E5%BA%94%E7%94%A8"><span class="toc-text">运行后台应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8postman%E5%B7%A5%E5%85%B7%E6%B5%8B%E8%AF%95%E6%8E%A5%E5%8F%A3"><span class="toc-text">使用postman工具测试接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E5%90%8E%E5%8F%B0%E4%BA%A4%E4%BA%92ajax"><span class="toc-text">前后台交互ajax</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Promise-async-await"><span class="toc-text">Promise+ async + await</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86"><span class="toc-text">配置代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%B5%8B%E8%AF%95-login-jsx"><span class="toc-text">请求测试: login.jsx</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Login-%E7%BB%84%E4%BB%B6-%E5%AE%8C%E6%88%90%E7%99%BB%E9%99%86%E5%8A%9F%E8%83%BD"><span class="toc-text">Login 组件(完成登陆功能)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Admin-%E7%BB%84%E4%BB%B6-%E6%90%AD%E5%BB%BA%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84"><span class="toc-text">Admin 组件(搭建整体结构)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Admin-%E7%9A%84%E5%AD%90%E8%B7%AF%E7%94%B1"><span class="toc-text">Admin 的子路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LeftNav%E7%BB%84%E4%BB%B6"><span class="toc-text">LeftNav组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Header-%E7%BB%84%E4%BB%B6"><span class="toc-text">Header 组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Home-%E7%95%8C%E9%9D%A2"><span class="toc-text">Home 界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%E7%AE%A1%E7%90%86"><span class="toc-text">分类管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><span class="toc-text">使用说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E3%80%81%E7%BB%84%E4%BB%B6%E5%8C%96%E3%80%81%E5%B7%A5%E7%A8%8B%E5%8C%96"><span class="toc-text">模块化、组件化、工程化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-text">模块化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E7%A8%8B%E5%8C%96"><span class="toc-text">工程化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E5%8C%96"><span class="toc-text">组件化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE"><span class="toc-text">后端数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MongoDB-%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="toc-text">MongoDB 的安装与配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-text">添加数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A9%E6%B0%94API"><span class="toc-text">天气API</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%92%8C%E9%A3%8E%E5%A4%A9%E6%B0%94%EF%BC%88%E4%B8%8D%E9%9C%80%E8%A6%81%E8%B7%A8%E5%9F%9F%E5%A4%84%E7%90%86%EF%BC%89"><span class="toc-text">和风天气（不需要跨域处理）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#less"><span class="toc-text">less</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%95%8C%E9%9D%A2"><span class="toc-text">界面</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%83%E5%B1%80"><span class="toc-text">布局</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2"><span class="toc-text">登录界面</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%85%E4%B8%AD%E5%B8%83%E5%B1%80"><span class="toc-text">居中布局</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Flex"><span class="toc-text">Flex</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#margin"><span class="toc-text">margin</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E4%B8%8E%E6%96%87%E5%AD%97%E5%9C%A8%E4%B8%80%E8%A1%8C%E5%86%85%E7%9A%84%E5%B1%85%E4%B8%AD%E9%97%AE%E9%A2%98"><span class="toc-text">图片与文字在一行内的居中问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%BC%8F%E7%BB%84%E4%BB%B6%E4%B8%8E%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6"><span class="toc-text">类式组件与函数式组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#React-Router-v6-%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-text">React-Router v6 新特性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SPA%E7%9A%84%E7%90%86%E8%A7%A3"><span class="toc-text">SPA的理解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8"><span class="toc-text">基础使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-text">路由参数传递</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#param%E5%8F%82%E6%95%B0"><span class="toc-text">param参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#search%E5%8F%82%E6%95%B0-amp-sate%E5%8F%82%E6%95%B0"><span class="toc-text">search参数&amp;sate参数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Antd-v3%E5%8D%87%E7%BA%A7%E6%88%90v4"><span class="toc-text">Antd v3升级成v4</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%BB%E9%99%A4-Form-create"><span class="toc-text">去除 Form.create</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E6%8E%A7%E5%88%B6%E8%B0%83%E6%95%B4"><span class="toc-text">表单控制调整</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E8%81%94%E5%8A%A8%E8%B0%83%E6%95%B4"><span class="toc-text">字段联动调整</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#onFinish-%E6%9B%BF%E4%BB%A3-onSubmit"><span class="toc-text">onFinish 替代 onSubmit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#scrollToField-%E6%9B%BF%E4%BB%A3-validateFieldsAndScroll"><span class="toc-text">scrollToField 替代 validateFieldsAndScroll</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E8%B0%83%E6%95%B4"><span class="toc-text">初始化调整</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E5%AD%97%E6%AE%B5%E8%B7%AF%E5%BE%84%E4%BD%BF%E7%94%A8%E6%95%B0%E7%BB%84"><span class="toc-text">嵌套字段路径使用数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#validateFields-%E4%B8%8D%E5%86%8D%E6%94%AF%E6%8C%81-callback"><span class="toc-text">validateFields 不再支持 callback</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-text">数据可视化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-text">功能实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-text">登录数据持久化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%A0%A1%E9%AA%8C"><span class="toc-text">输入校验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F%E5%92%8CAjax"><span class="toc-text">跨域和Ajax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E5%AD%90%E9%80%9A%E4%BF%A1"><span class="toc-text">父子通信</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#props"><span class="toc-text">props</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%91%E5%B8%83"><span class="toc-text">发布</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#BrowserRouter"><span class="toc-text">BrowserRouter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HashRouter"><span class="toc-text">HashRouter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">使用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GitHub-Pages%E5%8F%91%E5%B8%83%E9%9D%99%E6%80%81%E9%A1%B5%E9%9D%A2"><span class="toc-text">GitHub Pages发布静态页面</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96"><span class="toc-text">项目优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89hook%E5%AE%9E%E7%8E%B0%E6%90%9C%E7%B4%A2%E9%98%B2%E6%8A%96"><span class="toc-text">自定义hook实现搜索防抖</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#day01"><span class="toc-text">day01</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87"><span class="toc-text">1. 项目开发准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91"><span class="toc-text">2. 启动项目开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-git%E7%AE%A1%E7%90%86%E9%A1%B9%E7%9B%AE"><span class="toc-text">3. git管理项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-text">4. 创建项目的基本结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%BC%95%E5%85%A5antd"><span class="toc-text">5 引入antd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%BC%95%E5%85%A5%E8%B7%AF%E7%94%B1"><span class="toc-text">6. 引入路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-Login%E7%9A%84%E9%9D%99%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-text">7. Login的静态组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E6%94%B6%E9%9B%86%E8%A1%A8%E5%8D%95%E6%95%B0%E6%8D%AE%E5%92%8C%E8%A1%A8%E5%8D%95%E7%9A%84%E5%89%8D%E5%8F%B0%E9%AA%8C%E8%AF%81"><span class="toc-text">8. 收集表单数据和表单的前台验证</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0%E4%B8%8E%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6"><span class="toc-text">9. 高阶函数与高阶组件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#day02"><span class="toc-text">day02</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%90%8E%E5%8F%B0%E5%BA%94%E7%94%A8"><span class="toc-text">1. 后台应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%BC%96%E5%86%99ajax%E4%BB%A3%E7%A0%81"><span class="toc-text">2. 编写ajax代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%AE%9E%E7%8E%B0%E7%99%BB%E9%99%86-%E5%8C%85%E5%90%AB%E8%87%AA%E5%8A%A8%E7%99%BB%E9%99%86"><span class="toc-text">3. 实现登陆(包含自动登陆)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%90%AD%E5%BB%BAadmin%E7%9A%84%E6%95%B4%E4%BD%93%E7%95%8C%E9%9D%A2%E7%BB%93%E6%9E%84"><span class="toc-text">4. 搭建admin的整体界面结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-LeftNav%E7%BB%84%E4%BB%B6"><span class="toc-text">5. LeftNav组件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#day03"><span class="toc-text">day03</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Header%E7%BB%84%E4%BB%B6"><span class="toc-text">1. Header组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-jsonp%E8%A7%A3%E5%86%B3ajax%E8%B7%A8%E5%9F%9F%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-text">2. jsonp解决ajax跨域的原理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#day04-Category%E7%BB%84%E4%BB%B6"><span class="toc-text">day04: Category组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8antd%E7%BB%84%E4%BB%B6%E6%9E%84%E5%BB%BA%E5%88%86%E7%B1%BB%E5%88%97%E8%A1%A8%E7%95%8C%E9%9D%A2"><span class="toc-text">1. 使用antd组件构建分类列表界面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%9B%B8%E5%85%B3%E6%8E%A5%E5%8F%A3%E8%AF%B7%E6%B1%82%E5%87%BD%E6%95%B0"><span class="toc-text">2. 相关接口请求函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%BC%82%E6%AD%A5%E6%98%BE%E7%A4%BA%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB%E5%88%97%E8%A1%A8"><span class="toc-text">3. 异步显示一级分类列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%98%BE%E7%A4%BA%E4%BA%8C%E7%BA%A7%E5%88%86%E7%B1%BB%E5%88%97%E8%A1%A8"><span class="toc-text">4. 显示二级分类列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%9B%B4%E6%96%B0%E5%88%86%E7%B1%BB"><span class="toc-text">5. 更新分类</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#day05"><span class="toc-text">day05</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%B7%BB%E5%8A%A0%E5%88%86%E7%B1%BB"><span class="toc-text">1. 添加分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Product%E6%95%B4%E4%BD%93%E8%B7%AF%E7%94%B1"><span class="toc-text">2. Product整体路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%88%86%E9%A1%B5%E5%AE%9E%E7%8E%B0%E6%8A%80%E6%9C%AF-2%E7%A7%8D"><span class="toc-text">3. 分页实现技术(2种)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-ProductHome%E7%BB%84%E4%BB%B6"><span class="toc-text">4. ProductHome组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-ProductDetail%E7%BB%84%E4%BB%B6"><span class="toc-text">5. ProductDetail组件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#day06"><span class="toc-text">day06</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-ProductAddUpdate"><span class="toc-text">1. ProductAddUpdate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-PicturesWall"><span class="toc-text">2. PicturesWall</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#day07"><span class="toc-text">day07</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-RichTextEditor"><span class="toc-text">1. RichTextEditor</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%AE%8C%E6%88%90%E5%95%86%E5%93%81%E6%B7%BB%E5%8A%A0%E4%B8%8E%E4%BF%AE%E6%94%B9%E5%8A%9F%E8%83%BD"><span class="toc-text">2. 完成商品添加与修改功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E8%A7%92%E8%89%B2%E7%AE%A1%E7%90%86"><span class="toc-text">3. 角色管理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#day08"><span class="toc-text">day08</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-setState-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">1. setState()的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-setState-%E7%9A%84%E5%BC%82%E6%AD%A5%E4%B8%8E%E5%90%8C%E6%AD%A5"><span class="toc-text">2. setState()的异步与同步</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Component%E4%B8%8EPureComponent"><span class="toc-text">3. Component与PureComponent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-text">4. 用户管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%AF%BC%E8%88%AA%E8%8F%9C%E5%8D%95%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="toc-text">5. 导航菜单权限控制</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#day09"><span class="toc-text">day09</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-redux%E7%90%86%E8%A7%A3"><span class="toc-text">1. redux理解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-redux%E7%9B%B8%E5%85%B3API"><span class="toc-text">2. redux相关API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-redux%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5-3%E4%B8%AA"><span class="toc-text">3. redux核心概念(3个)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-redux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text">4. redux工作流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%BD%BF%E7%94%A8redux%E5%8F%8A%E7%9B%B8%E5%85%B3%E5%BA%93%E7%BC%96%E7%A0%81"><span class="toc-text">5. 使用redux及相关库编码</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#day10"><span class="toc-text">day10</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E6%90%AD%E5%BB%BAredux%E6%95%B4%E5%A5%97%E7%8E%AF%E5%A2%83"><span class="toc-text">1. 在项目中搭建redux整套环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%80%9A%E8%BF%87redux%E7%AE%A1%E7%90%86%E5%A4%B4%E9%83%A8%E6%A0%87%E9%A2%98headTitle%E6%95%B0%E6%8D%AE"><span class="toc-text">2. 通过redux管理头部标题headTitle数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%80%9A%E8%BF%87redux%E7%AE%A1%E7%90%86%E7%99%BB%E9%99%86%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AFuser%E6%95%B0%E6%8D%AE"><span class="toc-text">3. 通过redux管理登陆用户信息user数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%87%AA%E5%AE%9A%E4%B9%89redux%E5%BA%93"><span class="toc-text">4. 自定义redux库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E8%87%AA%E5%AE%9A%E4%B9%89react-redux%E5%BA%93"><span class="toc-text">5. 自定义react-redux库</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#day11"><span class="toc-text">day11</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-text">1. 数据可视化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%89%8D%E5%8F%B0404%E7%95%8C%E9%9D%A2"><span class="toc-text">2. 前台404界面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%89%93%E5%8C%85%E5%BA%94%E7%94%A8%E8%BF%90%E8%A1%8C"><span class="toc-text">3. 打包应用运行</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/66c016fb.html" title="JVM"><img src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/3.webp" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="JVM"></a><div class="content"><a class="title" href="/posts/66c016fb.html" title="JVM">JVM</a><time datetime="2022-10-07T06:46:20.000Z" title="发表于 2022-10-07 14:46:20">2022-10-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ff54bd4f.html" title="JS垃圾回收"><img src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/5.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="JS垃圾回收"></a><div class="content"><a class="title" href="/posts/ff54bd4f.html" title="JS垃圾回收">JS垃圾回收</a><time datetime="2022-10-07T03:01:02.000Z" title="发表于 2022-10-07 11:01:02">2022-10-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f7ede91d.html" title="Java基础"><img src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/8.webp" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="Java基础"></a><div class="content"><a class="title" href="/posts/f7ede91d.html" title="Java基础">Java基础</a><time datetime="2022-10-01T08:46:40.000Z" title="发表于 2022-10-01 16:46:40">2022-10-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f0caaae4.html" title="TS中那些奇怪的符号"><img src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/9.webp" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="TS中那些奇怪的符号"></a><div class="content"><a class="title" href="/posts/f0caaae4.html" title="TS中那些奇怪的符号">TS中那些奇怪的符号</a><time datetime="2022-07-10T03:12:48.000Z" title="发表于 2022-07-10 11:12:48">2022-07-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/6155a9d6.html" title="Axios"><img src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/14.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Lesliewaong/Lesliewaong.github.io/img/friend_404.gif"' alt="Axios"></a><div class="content"><a class="title" href="/posts/6155a9d6.html" title="Axios">Axios</a><time datetime="2022-07-05T08:42:42.000Z" title="发表于 2022-07-05 16:42:42">2022-07-05</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2023 By Leslie Waong</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><div class="js-pjax"><script>(()=>{const t=document.getElementById("twikoo-count"),o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo-k8ctnwg8j-1138964397-qqcom.vercel.app/",region:""},null))},e=()=>{twikoo.getCommentsCount({envId:"https://twikoo-k8ctnwg8j-1138964397-qqcom.vercel.app/",region:"",urls:[window.location.pathname],includeReply:!1}).then((function(o){t.innerText=o[0].count})).catch((function(t){console.error(t)}))},n=(n=!1)=>{"object"==typeof twikoo?(o(),n&&t&&setTimeout(e,0)):getScript("https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js").then(()=>{o(),n&&t&&setTimeout(e,0)})};btf.loadComment(document.getElementById("twikoo-wrap"),n)})()</script></div><div class="aplayer no-destroy" data-id="6995412795" data-server="tencent" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="random" data-preload="auto" data-autoplay="true" muted></div><script defer id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer color="0,0,255" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async mobile="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.removeEventListener("scroll",window.tocScrollFn),window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":0,"vOffset":0},"mobile":{"show":true,"scale":1},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false,"tagMode":false});</script></body></html>